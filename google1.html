<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classroom Platform - বাংলা Authentication System</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #1A237E;
            --primary-light: #3949AB;
            --accent: #00B8D4;
            --accent-light: #26C6DA;
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
            --neutral: #F5F5F5;
            --neutral-dark: #E0E0E0;
            --white: #FFFFFF;
            --text: #212121;
            --text-secondary: #757575;
            --shadow: 0 2px 12px rgba(26, 35, 126, 0.08);
            --shadow-hover: 0 4px 20px rgba(26, 35, 126, 0.12);
            --radius: 8px;
            --font: 'Roboto', sans-serif;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font);
            background: var(--neutral);
            color: var(--text);
            line-height: 1.6;
        }

        /* Enhanced Login Page Styles */
        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
        }

        .login-card {
            background: var(--white);
            padding: 3rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow-hover);
            text-align: center;
            max-width: 450px;
            width: 90%;
        }

        .login-logo {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .login-title {
            font-size: 1.8rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .login-subtitle {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .login-form {
            text-align: left;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--neutral-dark);
            border-radius: var(--radius);
            font-family: var(--font);
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(0, 184, 212, 0.1);
        }

        .login-btn {
            width: 100%;
            padding: 1rem;
            background: var(--accent);
            color: var(--white);
            border: none;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 1rem;
        }

        .login-btn:hover {
            background: var(--accent-light);
        }

        .login-btn:disabled {
            background: var(--neutral-dark);
            cursor: not-allowed;
        }

        .forgot-password {
            color: var(--accent);
            text-decoration: none;
            font-size: 0.9rem;
        }

        .forgot-password:hover {
            text-decoration: underline;
        }

        .error-message {
            background: rgba(244, 67, 54, 0.1);
            color: var(--danger);
            padding: 0.75rem;
            border-radius: var(--radius);
            margin-bottom: 1rem;
            border-left: 4px solid var(--danger);
        }

        .success-message {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success);
            padding: 0.75rem;
            border-radius: var(--radius);
            margin-bottom: 1rem;
            border-left: 4px solid var(--success);
        }

        .role-info {
            background: var(--neutral);
            padding: 1rem;
            border-radius: var(--radius);
            margin-top: 1rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Navigation */
        .navbar {
            background: var(--primary);
            color: var(--white);
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 500;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--white);
            border-right: 1px solid var(--neutral-dark);
            position: fixed;
            top: 70px;
            left: 0;
            height: calc(100vh - 70px);
            overflow-y: auto;
            padding: 1.5rem 0;
            transition: var(--transition);
        }

        .sidebar nav ul {
            list-style: none;
        }

        .sidebar nav ul li {
            margin-bottom: 0.5rem;
        }

        .sidebar nav ul li a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            color: var(--text);
            text-decoration: none;
            transition: var(--transition);
            border-radius: 0;
        }

        .sidebar nav ul li a:hover,
        .sidebar nav ul li a.active {
            background: var(--accent);
            color: var(--white);
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            padding: 2rem;
            min-height: calc(100vh - 70px);
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-hover);
        }

        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--neutral-dark);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-body {
            padding: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius);
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .btn-primary {
            background: var(--accent);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--accent-light);
        }

        .btn-secondary {
            background: var(--neutral-dark);
            color: var(--text);
        }

        .btn-success {
            background: var(--success);
            color: var(--white);
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }

        /* Class Code Display */
        .class-code-display {
            background: var(--neutral);
            padding: 1rem;
            border-radius: var(--radius);
            text-align: center;
            margin: 1rem 0;
        }

        .class-code {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            letter-spacing: 2px;
            margin-bottom: 0.5rem;
        }

        .class-code-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Course Cards */
        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .course-card {
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
        }

        .course-card:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-2px);
        }

        .course-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--white);
            padding: 1.5rem;
        }

        .course-title {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .course-code {
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .course-body {
            padding: 1.5rem;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            border-radius: var(--radius);
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--neutral-dark);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--neutral-dark);
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Assignment Items */
        .assignment-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border: 1px solid var(--neutral-dark);
            border-radius: var(--radius);
            margin-bottom: 1rem;
            background: var(--white);
        }

        .assignment-info h4 {
            margin-bottom: 0.25rem;
        }

        .assignment-meta {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Tables */
        .table-responsive {
            overflow-x: auto;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }

        .table th,
        .table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--neutral-dark);
        }

        .table th {
            background: var(--neutral);
            font-weight: 500;
            color: var(--text);
        }

        .table tbody tr:hover {
            background: rgba(0, 184, 212, 0.05);
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            font-size: 0.8rem;
            font-weight: 500;
            border-radius: 12px;
            color: var(--white);
        }

        .badge-primary {
            background: var(--primary);
        }

        .badge-success {
            background: var(--success);
        }

        .badge-warning {
            background: var(--warning);
        }

        .badge-danger {
            background: var(--danger);
        }

        /* Grid System */
        .row {
            display: flex;
            flex-wrap: wrap;
            margin: -0.75rem;
        }

        .col {
            flex: 1;
            padding: 0.75rem;
        }

        .col-2 {
            flex: 0 0 50%;
            padding: 0.75rem;
        }

        .col-3 {
            flex: 0 0 33.333%;
            padding: 0.75rem;
        }

        .col-4 {
            flex: 0 0 25%;
            padding: 0.75rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .main-content {
                margin-left: 0;
            }

            .navbar {
                padding: 1rem;
            }

            .course-grid {
                grid-template-columns: 1fr;
            }

            .row {
                flex-direction: column;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-1 {
            margin-bottom: 1rem;
        }

        .mb-2 {
            margin-bottom: 2rem;
        }

        .mt-1 {
            margin-top: 1rem;
        }

        .d-flex {
            display: flex;
        }

        .align-items-center {
            align-items: center;
        }

        .justify-content-between {
            justify-content: space-between;
        }

        .gap-1 {
            gap: 1rem;
        }
    </style>
</head>

<body>
    <!-- Enhanced Login Screen with Bengali Authentication -->
    <div id="loginContainer" class="login-container">
        <div class="login-card">
            <div class="login-logo">
                <i class="fas fa-graduation-cap"></i>
            </div>
            <h2 class="login-title">Classroom Platform</h2>
            <p class="login-subtitle">আপনার ইমেইল ও পাসওয়ার্ড দিয়ে লগইন করুন</p>

            <div id="loginMessage"></div>

            <form class="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label class="form-label">ইমেইল ঠিকানা / Email Address</label>
                    <input type="email" class="form-control" id="loginEmail" required placeholder="আপনার ইমেইল লিখুন">
                </div>

                <div class="form-group">
                    <label class="form-label">পাসওয়ার্ড / Password</label>
                    <input type="password" class="form-control" id="loginPassword" required
                        placeholder="আপনার পাসওয়ার্ড লিখুন">
                </div>

                <button type="submit" class="login-btn" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i> লগইন করুন
                </button>

                <div class="text-center">
                    <a href="#" class="forgot-password" onclick="forgotPassword()">পাসওয়ার্ড ভুলে গেছেন?</a>
                </div>
            </form>

            <div class="role-info">
                <strong>ভূমিকা সমূহ:</strong><br>
                👨‍🏫 <strong>শিক্ষক (Teacher):</strong> ক্লাস তৈরি, অ্যাসাইনমেন্ট দেওয়া, গ্রেড করা<br>
                👨‍🎓 <strong>ছাত্র (Student):</strong> ক্লাসে যোগদান, অ্যাসাইনমেন্ট জমা দেওয়া<br>
                🛠️ <strong>অ্যাডমিন (Admin):</strong> ইউজার ব্যবস্থাপনা, সিস্টেম নিয়ন্ত্রণ
            </div>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar" id="navbar" style="display: none;">
        <div class="logo">
            <i class="fas fa-graduation-cap"></i>
            Classroom Platform
        </div>
        <div class="nav-actions">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">U</div>
                <div>
                    <div id="currentUser">User</div>
                    <small id="currentEmail">user@email.com</small>
                </div>
                <span class="badge badge-primary" id="currentRole">Role</span>
            </div>
            <button class="btn btn-secondary btn-sm" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> লগআউট
            </button>
        </div>
    </nav>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar" style="display: none;">
        <nav id="sidebarNav">
            <!-- Navigation will be populated by JavaScript -->
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent" style="display: none;">
        <!-- Content will be populated by JavaScript -->
    </main>

    <!-- Course Creation Modal -->
    <div id="courseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>নতুন কোর্স তৈরি করুন</h3>
                <button class="close" onclick="closeModal('courseModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="courseForm">
                    <div class="form-group">
                        <label class="form-label">কোর্সের নাম</label>
                        <input type="text" class="form-control" id="courseName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">কোর্সের বিবরণ</label>
                        <textarea class="form-control" id="courseDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">বিষয়</label>
                        <select class="form-control" id="courseSubject">
                            <option value="mathematics">গণিত</option>
                            <option value="science">বিজ্ঞান</option>
                            <option value="english">ইংরেজি</option>
                            <option value="bangla">বাংলা</option>
                            <option value="history">ইতিহাস</option>
                            <option value="computer">কম্পিউটার বিজ্ঞান</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('courseModal')">বাতিল</button>
                <button class="btn btn-primary" onclick="createCourse()">কোর্স তৈরি করুন</button>
            </div>
        </div>
    </div>

    <!-- Join Class Modal -->
    <div id="joinClassModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ক্লাসে যোগদান করুন</h3>
                <button class="close" onclick="closeModal('joinClassModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">ক্লাস কোড</label>
                    <input type="text" class="form-control" id="classCodeInput"
                        placeholder="ক্লাস কোড লিখুন (যেমন: ABC123)" style="text-transform: uppercase;">
                </div>
                <p style="color: var(--text-secondary); font-size: 0.9rem;">
                    ক্লাসে যোগদানের জন্য আপনার শিক্ষকের কাছ থেকে ক্লাস কোড নিন।
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('joinClassModal')">বাতিল</button>
                <button class="btn btn-primary" onclick="joinClassWithCode()">ক্লাসে যোগদান</button>
            </div>
        </div>
    </div>

    <!-- Assignment Modal -->
    <div id="assignmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>অ্যাসাইনমেন্ট তৈরি করুন</h3>
                <button class="close" onclick="closeModal('assignmentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="assignmentForm">
                    <div class="form-group">
                        <label class="form-label">অ্যাসাইনমেন্টের শিরোনাম</label>
                        <input type="text" class="form-control" id="assignmentTitle" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">নির্দেশনা</label>
                        <textarea class="form-control" id="assignmentInstructions" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">জমা দেওয়ার শেষ তারিখ</label>
                        <input type="datetime-local" class="form-control" id="assignmentDueDate">
                    </div>
                    <div class="form-group">
                        <label class="form-label">নম্বর</label>
                        <input type="number" class="form-control" id="assignmentPoints" min="0" value="100">
                    </div>
                    <div class="form-group">
                        <label class="form-label">কোর্স</label>
                        <select class="form-control" id="assignmentCourse">
                            <!-- Will be populated dynamically -->
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('assignmentModal')">বাতিল</button>
                <button class="btn btn-primary" onclick="createAssignment()">অ্যাসাইনমেন্ট তৈরি করুন</button>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let currentUser = {
            email: '',
            name: '',
            role: '',
            avatar: ''
        };
        let courses = JSON.parse(localStorage.getItem('courses')) || [];
        let assignments = JSON.parse(localStorage.getItem('assignments')) || [];
        let userCourses = JSON.parse(localStorage.getItem('userCourses')) || {};
        let loginAttempts = 0;
        const maxLoginAttempts = 3;

        // Sample Users Database (In real app, this would be server-side)
        const usersDatabase = [
            // Teachers
            { email: 'teacher1@school.edu', password: 'teacher123', name: 'রহিম উদ্দিন', role: 'teacher' },
            { email: 'teacher2@school.edu', password: 'teacher123', name: 'ফাতেমা খাতুন', role: 'teacher' },
            { email: 'admin@school.edu', password: 'admin123', name: 'মোহাম্মদ আলী', role: 'admin' },

            // Students
            { email: 'student1@student.school.edu', password: 'student123', name: 'আহমেদ হাসান', role: 'student' },
            { email: 'student2@student.school.edu', password: 'student123', name: 'সারা বেগম', role: 'student' },
            { email: 'student3@student.school.edu', password: 'student123', name: 'করিম উল্লাহ', role: 'student' }
        ];

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function () {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                hideLogin();
                initializeApp();
            } else {
                showLogin();
            }
        });

        // Enhanced Login Handler
        function handleLogin(event) {
            event.preventDefault();

            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const loginBtn = document.getElementById('loginBtn');
            const messageDiv = document.getElementById('loginMessage');

            // Check login attempts
            if (loginAttempts >= maxLoginAttempts) {
                showMessage('অনেকবার ভুল পাসওয়ার্ড দেওয়া হয়েছে। ৫ মিনিট পর আবার চেষ্টা করুন।', 'error');
                loginBtn.disabled = true;
                setTimeout(() => {
                    loginAttempts = 0;
                    loginBtn.disabled = false;
                }, 300000); // 5 minutes
                return;
            }

            // Disable button during login
            loginBtn.disabled = true;
            loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> লগইন হচ্ছে...';

            // Simulate authentication delay
            setTimeout(() => {
                // Check credentials
                const user = usersDatabase.find(u => u.email === email && u.password === password);

                if (user) {
                    // Successful login
                    currentUser = {
                        email: user.email,
                        name: user.name,
                        role: user.role,
                        avatar: user.name.charAt(0).toUpperCase()
                    };

                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    loginAttempts = 0;

                    showMessage('সফলভাবে লগইন হয়েছে!', 'success');

                    setTimeout(() => {
                        hideLogin();
                        initializeApp();
                    }, 1000);
                } else {
                    // Failed login
                    loginAttempts++;
                    showMessage(`ভুল ইমেইল বা পাসওয়ার্ড। আরও ${maxLoginAttempts - loginAttempts} বার চেষ্টা করতে পারবেন।`, 'error');

                    loginBtn.disabled = false;
                    loginBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> লগইন করুন';
                }
            }, 1500);
        }

        function showMessage(message, type) {
            const messageDiv = document.getElementById('loginMessage');
            messageDiv.innerHTML = `<div class="${type}-message">${message}</div>`;

            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 5000);
        }

        function forgotPassword() {
            const email = prompt('আপনার ইমেইল ঠিকানা লিখুন:');
            if (email) {
                showMessage('পাসওয়ার্ড রিসেট লিংক আপনার ইমেইলে পাঠানো হয়েছে।', 'success');
            }
        }

        function showLogin() {
            document.getElementById('loginContainer').style.display = 'flex';
            document.getElementById('navbar').style.display = 'none';
            document.getElementById('sidebar').style.display = 'none';
            document.getElementById('mainContent').style.display = 'none';
        }

        function hideLogin() {
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('navbar').style.display = 'flex';
            document.getElementById('sidebar').style.display = 'block';
            document.getElementById('mainContent').style.display = 'block';
        }

        function logout() {
            localStorage.removeItem('currentUser');
            currentUser = { email: '', name: '', role: '', avatar: '' };
            loginAttempts = 0;
            showLogin();
        }

        // Initialize Application
        function initializeApp() {
            // Update user info in navbar
            document.getElementById('currentUser').textContent = currentUser.name;
            document.getElementById('currentEmail').textContent = currentUser.email;
            document.getElementById('currentRole').textContent = getRoleName(currentUser.role);
            document.getElementById('userAvatar').textContent = currentUser.avatar;

            generateSidebar();
            showDashboard();

            // Initialize sample data if empty
            if (courses.length === 0) {
                initializeSampleData();
            }
        }

        function getRoleName(role) {
            const roleNames = {
                'teacher': 'শিক্ষক',
                'student': 'ছাত্র',
                'admin': 'অ্যাডমিন'
            };
            return roleNames[role] || role;
        }

        // Generate Sidebar Navigation
        function generateSidebar() {
            const sidebarNav = document.getElementById('sidebarNav');
            let navHTML = '<ul>';

            // Common navigation items
            navHTML += `
                <li><a href="#" onclick="showDashboard()" class="nav-link"><i class="fas fa-tachometer-alt"></i> ড্যাশবোর্ড</a></li>
                <li><a href="#" onclick="showCourses()" class="nav-link"><i class="fas fa-book"></i> কোর্স সমূহ</a></li>
                <li><a href="#" onclick="showAssignments()" class="nav-link"><i class="fas fa-tasks"></i> অ্যাসাইনমেন্ট</a></li>
                <li><a href="#" onclick="showLibrary()" class="nav-link"><i class="fas fa-folder"></i> রিসোর্স লাইব্রেরি</a></li>
                <li><a href="#" onclick="showCalendar()" class="nav-link"><i class="fas fa-calendar"></i> ক্যালেন্ডার</a></li>
                <li><a href="#" onclick="showAnalytics()" class="nav-link"><i class="fas fa-chart-bar"></i> অ্যানালিটিক্স</a></li>
                <li><a href="#" onclick="showAnnouncements()" class="nav-link"><i class="fas fa-bullhorn"></i> ঘোষণা</a></li>
                <li><a href="#" onclick="showSettings()" class="nav-link"><i class="fas fa-cog"></i> সেটিংস</a></li>
            `;

            // Role-specific navigation
            if (currentUser.role === 'admin') {
                navHTML += `
                    <li><a href="#" onclick="showUserManagement()" class="nav-link"><i class="fas fa-users"></i> ইউজার ব্যবস্থাপনা</a></li>
                    <li><a href="#" onclick="showAuditLogs()" class="nav-link"><i class="fas fa-clipboard-list"></i> অডিট লগ</a></li>
                `;
            }

            navHTML += '</ul>';
            sidebarNav.innerHTML = navHTML;
        }

        // Dashboard
        function showDashboard() {
            setActiveNav('ড্যাশবোর্ড');
            const userCoursesList = getUserCourses();

            let dashboardHTML = `
                <h2><i class="fas fa-tachometer-alt"></i> স্বাগতম, ${currentUser.name}</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">${userCoursesList.length}</div>
                        <div class="stat-label">${currentUser.role === 'teacher' ? 'তৈরি করা কোর্স' : 'ভর্তি হওয়া কোর্স'}</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${assignments.length}</div>
                        <div class="stat-label">মোট অ্যাসাইনমেন্ট</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${courses.length}</div>
                        <div class="stat-label">মোট কোর্স</div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-2">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">${currentUser.role === 'teacher' ? 'আপনার কোর্স সমূহ' : 'ভর্তি হওয়া কোর্স'}</h3>
                            </div>
                            <div class="card-body">
                                <div class="course-grid">
                                    ${userCoursesList.slice(0, 3).map(course => `
                                        <div class="course-card">
                                            <div class="course-header">
                                                <div class="course-title">${course.name}</div>
                                                <div class="course-code">কোড: ${course.code}</div>
                                            </div>
                                            <div class="course-body">
                                                <p>${course.description}</p>
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <span class="badge badge-primary">${course.subject}</span>
                                                    <button class="btn btn-sm btn-primary" onclick="viewCourse('${course.id}')">দেখুন</button>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                                ${currentUser.role === 'teacher' ? `
                                    <button class="btn btn-primary mt-1" onclick="openModal('courseModal')">
                                        <i class="fas fa-plus"></i> নতুন কোর্স তৈরি করুন
                                    </button>
                                ` : `
                                    <button class="btn btn-primary mt-1" onclick="openModal('joinClassModal')">
                                        <i class="fas fa-sign-in-alt"></i> ক্লাসে যোগদান করুন
                                    </button>
                                `}
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-2">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">সাম্প্রতিক কার্যক্রম</h3>
                            </div>
                            <div class="card-body">
                                <ul>
                                    ${currentUser.role === 'teacher' ? `
                                        <li>অ্যাসাইনমেন্ট জমা পর্যালোচনা করুন</li>
                                        <li>অধ্যায় ৫ এর জন্য কুইজ প্রস্তুত করুন</li>
                                        <li>কোর্স উপকরণ আপডেট করুন</li>
                                        <li>অভিভাবক-শিক্ষক সভার সময় নির্ধারণ করুন</li>
                                    ` : `
                                        <li>গণিত অ্যাসাইনমেন্ট জমা দিন</li>
                                        <li>বিজ্ঞান কুইজ সম্পূর্ণ করুন</li>
                                        <li>অধ্যায় ৩ এর উপকরণ পড়ুন</li>
                                        <li>দুপুর ২টায় লাইভ ক্লাসে যোগ দিন</li>
                                    `}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                ${currentUser.role === 'teacher' ? `
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">শিক্ষক সরঞ্জাম</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-3">
                                <h4>কন্টেন্ট ব্যবস্থাপনা</h4>
                                <ul>
                                    <li>কোর্স তৈরি ও পরিচালনা</li>
                                    <li>রিসোর্স ও উপকরণ আপলোড</li>
                                    <li>বিষয়বস্তু সংগঠিত করা</li>
                                </ul>
                            </div>
                            <div class="col-3">
                                <h4>ছাত্র মূল্যায়ন</h4>
                                <ul>
                                    <li>অ্যাসাইনমেন্ট ও কুইজ তৈরি</li>
                                    <li>জমা দেওয়া কাজ গ্রেড করা</li>
                                    <li>ছাত্রদের পারফরম্যান্স ট্র্যাক করা</li>
                                </ul>
                            </div>
                            <div class="col-3">
                                <h4>যোগাযোগ</h4>
                                <ul>
                                    <li>ঘোষণা পোস্ট করা</li>
                                    <li>ফিডব্যাক প্রদান</li>
                                    <li>ইমেইলের মাধ্যমে ছাত্র আমন্ত্রণ</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                ` : `
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ছাত্র কার্যক্রম</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-3">
                                <h4>ক্লাস অংশগ্রহণ</h4>
                                <ul>
                                    <li>ক্লাস কোড ব্যবহার করে ক্লাসে যোগদান</li>
                                    <li>আলোচনায় অংশগ্রহণ</li>
                                    <li>লাইভ সেশনে উপস্থিতি</li>
                                </ul>
                            </div>
                            <div class="col-3">
                                <h4>অ্যাসাইনমেন্ট জমা</h4>
                                <ul>
                                    <li>সময়মতো অ্যাসাইনমেন্ট জমা দেওয়া</li>
                                    <li>কুইজ ও পরীক্ষায় অংশগ্রহণ</li>
                                    <li>গ্রেড ও ফিডব্যাক দেখা</li>
                                </ul>
                            </div>
                            <div class="col-3">
                                <h4>শিক্ষা সামগ্রী</h4>
                                <ul>
                                    <li>কোর্স উপকরণ অ্যাক্সেস</li>
                                    <li>অধ্যয়ন সামগ্রী ডাউনলোড</li>
                                    <li>রেকর্ড করা লেকচার দেখা</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                `}
            `;

            document.getElementById('mainContent').innerHTML = dashboardHTML;
        }

        // Courses Page
        function showCourses() {
            setActiveNav('কোর্স সমূহ');
            const userCoursesList = getUserCourses();

            let coursesHTML = `
                <h2><i class="fas fa-book"></i> কোর্স সমূহ</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">${currentUser.role === 'teacher' ? 'আপনার কোর্স সমূহ' : 'ভর্তি হওয়া কোর্স'}</h3>
                        ${currentUser.role === 'teacher' ? `
                            <button class="btn btn-primary" onclick="openModal('courseModal')">
                                <i class="fas fa-plus"></i> নতুন কোর্স তৈরি করুন
                            </button>
                        ` : `
                            <button class="btn btn-primary" onclick="openModal('joinClassModal')">
                                <i class="fas fa-sign-in-alt"></i> ক্লাসে যোগদান করুন
                            </button>
                        `}
                    </div>
                    <div class="card-body">
                        <div class="course-grid">
                            ${userCoursesList.map(course => `
                                <div class="course-card">
                                    <div class="course-header">
                                        <div class="course-title">${course.name}</div>
                                        <div class="course-code">কোড: ${course.code}</div>
                                    </div>
                                    <div class="course-body">
                                        <p>${course.description}</p>
                                        ${currentUser.role === 'teacher' ? `
                                            <div class="class-code-display">
                                                <div class="class-code">${course.code}</div>
                                                <div class="class-code-label">এই কোডটি ছাত্রদের সাথে শেয়ার করুন</div>
                                            </div>
                                        ` : ''}
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="badge badge-primary">${course.subject}</span>
                                            <div>
                                                <button class="btn btn-sm btn-primary" onclick="viewCourse('${course.id}')">দেখুন</button>
                                                ${currentUser.role === 'teacher' ? `
                                                    <button class="btn btn-sm btn-secondary" onclick="editCourse('${course.id}')">সম্পাদনা</button>
                                                    <button class="btn btn-sm btn-success" onclick="inviteStudents('${course.id}')">ছাত্র আমন্ত্রণ</button>
                                                ` : ''}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">${currentUser.role === 'teacher' ? 'কোর্স তৈরি' : 'ক্লাসে যোগদান'} কিভাবে কাজ করে</h3>
                    </div>
                    <div class="card-body">
                        ${currentUser.role === 'teacher' ? `
                            <div class="row">
                                <div class="col-3">
                                    <h4>১. কোর্স তৈরি করুন</h4>
                                    <p>নাম, বিবরণ ও বিষয় দিয়ে নতুন কোর্স তৈরি করুন। একটি অনন্য ক্লাস কোড স্বয়ংক্রিয়ভাবে তৈরি হবে।</p>
                                </div>
                                <div class="col-3">
                                    <h4>২. ক্লাস কোড শেয়ার করুন</h4>
                                    <p>তৈরি হওয়া ক্লাস কোডটি আপনার ছাত্রদের সাথে শেয়ার করুন অথবা সরাসরি ইমেইলে আমন্ত্রণ পাঠান।</p>
                                </div>
                                <div class="col-3">
                                    <h4>৩. কন্টেন্ট পরিচালনা করুন</h4>
                                    <p>অ্যাসাইনমেন্ট যোগ করুন, রিসোর্স আপলোড করুন, ঘোষণা পোস্ট করুন এবং ছাত্রদের অগ্রগতি ট্র্যাক করুন।</p>
                                </div>
                            </div>
                        ` : `
                            <div class="row">
                                <div class="col-3">
                                    <h4>১. ক্লাস কোড নিন</h4>
                                    <p>আপনার শিক্ষকের কাছ থেকে ক্লাস কোড নিন অথবা ইমেইলে আমন্ত্রণ চেক করুন।</p>
                                </div>
                                <div class="col-3">
                                    <h4>২. ক্লাসে যোগদান করুন</h4>
                                    <p>"ক্লাসে যোগদান" ফর্মে ক্লাস কোড লিখে কোর্সে ভর্তি হন।</p>
                                </div>
                                <div class="col-3">
                                    <h4>৩. অংশগ্রহণ করুন</h4>
                                    <p>কোর্স উপকরণ অ্যাক্সেস করুন, অ্যাসাইনমেন্ট জমা দিন এবং ক্লাস কার্যক্রমে অংশগ্রহণ করুন।</p>
                                </div>
                            </div>
                        `}
                    </div>
                </div>
            `;

            document.getElementById('mainContent').innerHTML = coursesHTML;
        }

        // Assignments Page
        function showAssignments() {
            setActiveNav('অ্যাসাইনমেন্ট');
            const userCoursesList = getUserCourses();
            const userAssignments = assignments.filter(assignment =>
                userCoursesList.some(course => course.name === assignment.course)
            );

            let assignmentsHTML = `
                <h2><i class="fas fa-tasks"></i> অ্যাসাইনমেন্ট</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">অ্যাসাইনমেন্ট ব্যবস্থাপনা</h3>
                        ${currentUser.role === 'teacher' ? `
                            <button class="btn btn-primary" onclick="openModal('assignmentModal')">
                                <i class="fas fa-plus"></i> নতুন অ্যাসাইনমেন্ট তৈরি করুন
                            </button>
                        ` : ''}
                    </div>
                    <div class="card-body">
                        ${userAssignments.map(assignment => `
                            <div class="assignment-item">
                                <div class="assignment-info">
                                    <h4>${assignment.title}</h4>
                                    <div class="assignment-meta">
                                        শেষ তারিখ: ${assignment.dueDate} | নম্বর: ${assignment.points}
                                        <span class="badge badge-primary">${assignment.course}</span>
                                    </div>
                                </div>
                                <div>
                                    ${currentUser.role === 'student' ? `
                                        <button class="btn btn-sm btn-primary" onclick="submitAssignment('${assignment.id}')">জমা দিন</button>
                                    ` : `
                                        <button class="btn btn-sm btn-secondary" onclick="viewSubmissions('${assignment.id}')">জমা দেখুন</button>
                                        <button class="btn btn-sm btn-primary" onclick="editAssignment('${assignment.id}')">সম্পাদনা</button>
                                    `}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            document.getElementById('mainContent').innerHTML = assignmentsHTML;
        }

        // Announcements Page
        function showAnnouncements() {
            setActiveNav('ঘোষণা');
            let announcementsHTML = `
                <h2><i class="fas fa-bullhorn"></i> ঘোষণা</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ক্লাস ঘোষণা</h3>
                        ${currentUser.role !== 'student' ? `
                            <button class="btn btn-primary" onclick="createAnnouncement()">
                                <i class="fas fa-plus"></i> নতুন ঘোষণা তৈরি করুন
                            </button>
                        ` : ''}
                    </div>
                    <div class="card-body">
                        <div class="assignment-item">
                            <div class="assignment-info">
                                <h4>প্রকল্পের শেষ তারিখ বৃদ্ধি</h4>
                                <div class="assignment-meta">
                                    পোস্ট করেছেন: অধ্যাপক জনসন | জুলাই ১৪, ২০২৫ | 
                                    <span class="badge badge-primary">গণিত ১০১</span>
                                </div>
                                <p>আসন্ন ছুটির দিনের কারণে চূড়ান্ত প্রকল্পের শেষ তারিখ জুলাই ২৫ তারিখ পর্যন্ত বৃদ্ধি করা হয়েছে। এই অতিরিক্ত সময় ব্যবহার করে আপনার জমা দেওয়া কাজ আরও উন্নত করুন।</p>
                            </div>
                            <div>
                                ${currentUser.role !== 'student' ? `
                                    <button class="btn btn-sm btn-secondary" onclick="editAnnouncement('1')">সম্পাদনা</button>
                                    <button class="btn btn-sm btn-danger" onclick="deleteAnnouncement('1')">মুছুন</button>
                                ` : ''}
                                <button class="btn btn-sm btn-primary" onclick="replyToAnnouncement('1')">উত্তর দিন</button>
                            </div>
                        </div>
                        
                        <div class="assignment-item">
                            <div class="assignment-info">
                                <h4>নতুন অধ্যয়ন সামগ্রী উপলব্ধ</h4>
                                <div class="assignment-meta">
                                    পোস্ট করেছেন: ডাঃ স্মিথ | জুলাই ১২, ২০২৫ | 
                                    <span class="badge badge-success">বিজ্ঞান ২০১</span>
                                </div>
                                <p>আসন্ন পরীক্ষার জন্য অতিরিক্ত অধ্যয়ন সামগ্রী আপলোড করা হয়েছে। সর্বশেষ ফাইলগুলির জন্য রিসোর্স লাইব্রেরি চেক করুন।</p>
                            </div>
                            <div>
                                ${currentUser.role !== 'student' ? `
                                    <button class="btn btn-sm btn-secondary" onclick="editAnnouncement('2')">সম্পাদনা</button>
                                    <button class="btn btn-sm btn-danger" onclick="deleteAnnouncement('2')">মুছুন</button>
                                ` : ''}
                                <button class="btn btn-sm btn-primary" onclick="replyToAnnouncement('2')">উত্তর দিন</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ঘোষণার বৈশিষ্ট্য</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-3">
                                <h4>সময় নির্ধারণ</h4>
                                <p>উন্নত সময়ের জন্য নির্দিষ্ট সময়ে পোস্ট করার জন্য ঘোষণা সময়সূচী করুন।</p>
                            </div>
                            <div class="col-3">
                                <h4>উত্তর নিয়ন্ত্রণ</h4>
                                <p>শিক্ষকরা নিয়ন্ত্রণ করতে পারেন ছাত্ররা ঘোষণার উত্তর দিতে পারবে কিনা।</p>
                            </div>
                            <div class="col-3">
                                <h4>বহু-ক্লাস পোস্টিং</h4>
                                <p>একসাথে একাধিক ক্লাসে ঘোষণা পোস্ট করুন।</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('mainContent').innerHTML = announcementsHTML;
        }

        // Resource Library
        function showLibrary() {
            setActiveNav('রিসোর্স লাইব্রেরি');
            let libraryHTML = `
                <h2><i class="fas fa-folder"></i> রিসোর্স লাইব্রেরি</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">কোর্স উপকরণ</h3>
                        ${currentUser.role === 'teacher' ? `
                            <button class="btn btn-primary" onclick="uploadFile()">
                                <i class="fas fa-upload"></i> ফাইল আপলোড করুন
                            </button>
                        ` : ''}
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>নাম</th>
                                        <th>কোর্স</th>
                                        <th>ধরন</th>
                                        <th>আকার</th>
                                        <th>পরিবর্তিত</th>
                                        <th>কার্যক্রম</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><i class="fas fa-file-pdf"></i> লেকচার_নোট_অধ্যায়১.pdf</td>
                                        <td>গণিত ১০১</td>
                                        <td>PDF</td>
                                        <td>২.৫ MB</td>
                                        <td>২০২৫-০৭-১০</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" onclick="downloadFile('lecture1')">ডাউনলোড</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-file-word"></i> অ্যাসাইনমেন্ট_নির্দেশিকা.docx</td>
                                        <td>বিজ্ঞান ২০১</td>
                                        <td>Word</td>
                                        <td>১.২ MB</td>
                                        <td>২০২৫-০৭-১২</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" onclick="downloadFile('guidelines1')">ডাউনলোড</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('mainContent').innerHTML = libraryHTML;
        }

        // Calendar
        function showCalendar() {
            setActiveNav('ক্যালেন্ডার');
            let calendarHTML = `
                <h2><i class="fas fa-calendar"></i> ক্যালেন্ডার</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ক্লাস সূচি</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-2">
                                <h4>আসন্ন ইভেন্ট</h4>
                                <ul>
                                    <li><strong>জুলাই ১৬:</strong> গণিত অ্যাসাইনমেন্ট জমা</li>
                                    <li><strong>জুলাই ১৮:</strong> বিজ্ঞান কুইজ</li>
                                    <li><strong>জুলাই ২০:</strong> ইংরেজি রচনা জমা</li>
                                    <li><strong>জুলাই ২২:</strong> লাইভ ক্লাস - পদার্থবিজ্ঞান</li>
                                </ul>
                            </div>
                            <div class="col-2">
                                <h4>আজকের কাজ</h4>
                                <ul>
                                    ${currentUser.role === 'teacher' ? `
                                        <li>জমা দেওয়া অ্যাসাইনমেন্ট পর্যালোচনা করুন</li>
                                        <li>আগামীকালের লেকচার প্রস্তুত করুন</li>
                                        <li>কুইজ পেপার গ্রেড করুন</li>
                                    ` : `
                                        <li>গণিত হোমওয়ার্ক সম্পূর্ণ করুন</li>
                                        <li>বিজ্ঞান অধ্যায় ৫ পড়ুন</li>
                                        <li>কুইজের জন্য প্রস্তুতি নিন</li>
                                    `}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('mainContent').innerHTML = calendarHTML;
        }

        // Analytics
        function showAnalytics() {
            setActiveNav('অ্যানালিটিক্স');
            let analyticsHTML = `
                <h2><i class="fas fa-chart-bar"></i> অ্যানালিটিক্স</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">${currentUser.role === 'teacher' ? 'ক্লাস পারফরম্যান্স' : 'আপনার অগ্রগতি'}</h3>
                    </div>
                    <div class="card-body">
                        ${currentUser.role === 'teacher' ? `
                            <div class="row">
                                <div class="col-3">
                                    <div class="stat-card">
                                        <div class="stat-number">৮৫%</div>
                                        <div class="stat-label">অ্যাসাইনমেন্ট সম্পূর্ণ</div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="stat-card">
                                        <div class="stat-number">B+</div>
                                        <div class="stat-label">গড় গ্রেড</div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="stat-card">
                                        <div class="stat-number">২৪</div>
                                        <div class="stat-label">সক্রিয় ছাত্র</div>
                                    </div>
                                </div>
                            </div>
                        ` : `
                            <div class="row">
                                <div class="col-3">
                                    <div class="stat-card">
                                        <div class="stat-number">৯২%</div>
                                        <div class="stat-label">অ্যাসাইনমেন্ট সম্পূর্ণ</div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="stat-card">
                                        <div class="stat-number">A-</div>
                                        <div class="stat-label">বর্তমান গ্রেড</div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="stat-card">
                                        <div class="stat-number">৫</div>
                                        <div class="stat-label">ভর্তি হওয়া কোর্স</div>
                                    </div>
                                </div>
                            </div>
                        `}
                    </div>
                </div>
            `;

            document.getElementById('mainContent').innerHTML = analyticsHTML;
        }

        // Settings
        function showSettings() {
            setActiveNav('সেটিংস');
            let settingsHTML = `
                <h2><i class="fas fa-cog"></i> সেটিংস</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">অ্যাকাউন্ট সেটিংস</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">নাম</label>
                            <input type="text" class="form-control" value="${currentUser.name}" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ইমেইল</label>
                            <input type="email" class="form-control" value="${currentUser.email}" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ভূমিকা</label>
                            <input type="text" class="form-control" value="${getRoleName(currentUser.role)}" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ভাষা</label>
                            <select class="form-control">
                                <option value="bn">বাংলা</option>
                                <option value="en">English</option>
                                <option value="hi">हिन्दी</option>
                            </select>
                        </div>
                        <button class="btn btn-primary">সেটিংস সংরক্ষণ করুন</button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">নিরাপত্তা সেটিংস</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">পাসওয়ার্ড পরিবর্তন করুন</label>
                            <input type="password" class="form-control" placeholder="নতুন পাসওয়ার্ড">
                        </div>
                        <div class="form-group">
                            <label class="form-label">পাসওয়ার্ড নিশ্চিত করুন</label>
                            <input type="password" class="form-control" placeholder="পাসওয়ার্ড পুনরায় লিখুন">
                        </div>
                        <button class="btn btn-primary">পাসওয়ার্ড আপডেট করুন</button>
                    </div>
                </div>
            `;

            document.getElementById('mainContent').innerHTML = settingsHTML;
        }

        // Admin: User Management
        function showUserManagement() {
            if (currentUser.role !== 'admin') return;
            setActiveNav('ইউজার ব্যবস্থাপনা');
            let userManagementHTML = `
                <h2><i class="fas fa-users"></i> ইউজার ব্যবস্থাপনা</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ইউজার প্রশাসন</h3>
                        <div>
                            <button class="btn btn-primary" onclick="addNewUser()">
                                <i class="fas fa-user-plus"></i> নতুন ইউজার যোগ করুন
                            </button>
                            <button class="btn btn-success" onclick="bulkUploadUsers()">
                                <i class="fas fa-upload"></i> বাল্ক আপলোড
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>নাম</th>
                                        <th>ইমেইল</th>
                                        <th>ভূমিকা</th>
                                        <th>অবস্থা</th>
                                        <th>শেষ লগইন</th>
                                        <th>কার্যক্রম</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${usersDatabase.map(user => `
                                        <tr>
                                            <td>${user.name}</td>
                                            <td>${user.email}</td>
                                            <td><span class="badge badge-primary">${getRoleName(user.role)}</span></td>
                                            <td><span class="badge badge-success">সক্রিয়</span></td>
                                            <td>২ ঘন্টা আগে</td>
                                            <td>
                                                <button class="btn btn-sm btn-secondary" onclick="editUser('${user.email}')">সম্পাদনা</button>
                                                <button class="btn btn-sm btn-danger" onclick="deactivateUser('${user.email}')">নিষ্ক্রিয়</button>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('mainContent').innerHTML = userManagementHTML;
        }

        // Admin: Audit Logs
        function showAuditLogs() {
            if (currentUser.role !== 'admin') return;
            setActiveNav('অডিট লগ');
            let auditHTML = `
                <h2><i class="fas fa-clipboard-list"></i> অডিট লগ ও কার্যক্রম ট্র্যাকিং</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">সিস্টেম কার্যক্রম লগ</h3>
                        <button class="btn btn-primary" onclick="exportAuditLogs()">
                            <i class="fas fa-download"></i> লগ এক্সপোর্ট করুন
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>সময়</th>
                                        <th>ইউজার</th>
                                        <th>কার্যক্রম</th>
                                        <th>রিসোর্স</th>
                                        <th>IP ঠিকানা</th>
                                        <th>অবস্থা</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>২০২৫-০৭-১৫ ১০:৩০:১৫</td>
                                        <td>student1@student.school.edu</td>
                                        <td>অ্যাসাইনমেন্ট জমা</td>
                                        <td>গণিত কুইজ ৩</td>
                                        <td>১৯২.১৬৮.১.১০০</td>
                                        <td><span class="badge badge-success">সফল</span></td>
                                    </tr>
                                    <tr>
                                        <td>২০২৫-০৭-১৫ ০৯:৪৫:২২</td>
                                        <td>teacher1@school.edu</td>
                                        <td>কোর্স তৈরি</td>
                                        <td>উন্নত পদার্থবিজ্ঞান</td>
                                        <td>১৯২.১৬৮.১.৫০</td>
                                        <td><span class="badge badge-success">সফল</span></td>
                                    </tr>
                                    <tr>
                                        <td>২০২৫-০৭-১৫ ০৮:২০:৩ৃ</td>
                                        <td>admin@school.edu</td>
                                        <td>ইউজার ব্যবস্থাপনা</td>
                                        <td>নতুন শিক্ষক যোগ</td>
                                        <td>১৯২.১৬৮.১.১০</td>
                                        <td><span class="badge badge-success">সফল</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('mainContent').innerHTML = auditHTML;
        }

        // Utility Functions
        function setActiveNav(pageName) {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });

            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.textContent.trim().includes(pageName)) {
                    link.classList.add('active');
                }
            });
        }

        function openModal(modalId) {
            if (modalId === 'assignmentModal') {
                populateAssignmentCourses();
            }
            document.getElementById(modalId).classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        function populateAssignmentCourses() {
            const courseSelect = document.getElementById('assignmentCourse');
            const userCoursesList = getUserCourses();

            courseSelect.innerHTML = userCoursesList.map(course =>
                `<option value="${course.name}">${course.name}</option>`
            ).join('');
        }

        function getUserCourses() {
            if (currentUser.role === 'teacher') {
                return courses.filter(course => course.teacher === currentUser.email);
            } else {
                const userEnrolledCourses = userCourses[currentUser.email] || [];
                return courses.filter(course => userEnrolledCourses.includes(course.id));
            }
        }

        function generateClassCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < 6; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        // Course Management
        function createCourse() {
            const courseName = document.getElementById('courseName').value;
            const courseDescription = document.getElementById('courseDescription').value;
            const courseSubject = document.getElementById('courseSubject').value;

            if (!courseName) {
                alert('দয়া করে কোর্সের নাম লিখুন');
                return;
            }

            const newCourse = {
                id: 'course_' + Date.now(),
                name: courseName,
                code: generateClassCode(),
                description: courseDescription,
                subject: courseSubject,
                teacher: currentUser.email,
                teacherName: currentUser.name,
                created: new Date().toISOString()
            };

            courses.push(newCourse);
            localStorage.setItem('courses', JSON.stringify(courses));
            closeModal('courseModal');
            showCourses();
            alert(`কোর্স সফলভাবে তৈরি হয়েছে! ক্লাস কোড: ${newCourse.code}`);
        }

        function joinClassWithCode() {
            const classCode = document.getElementById('classCodeInput').value.toUpperCase();

            if (!classCode) {
                alert('দয়া করে ক্লাস কোড লিখুন');
                return;
            }

            const course = courses.find(c => c.code === classCode);
            if (!course) {
                alert('ভুল ক্লাস কোড। দয়া করে আপনার শিক্ষকের সাথে যোগাযোগ করুন।');
                return;
            }

            // Add student to course
            if (!userCourses[currentUser.email]) {
                userCourses[currentUser.email] = [];
            }

            if (userCourses[currentUser.email].includes(course.id)) {
                alert('আপনি ইতিমধ্যে এই কোর্সে ভর্তি হয়েছেন।');
                return;
            }

            userCourses[currentUser.email].push(course.id);
            localStorage.setItem('userCourses', JSON.stringify(userCourses));

            closeModal('joinClassModal');
            showCourses();
            alert(`সফলভাবে ${course.name} কোর্সে যোগদান করেছেন!`);
        }

        function createAssignment() {
            const title = document.getElementById('assignmentTitle').value;
            const instructions = document.getElementById('assignmentInstructions').value;
            const dueDate = document.getElementById('assignmentDueDate').value;
            const points = document.getElementById('assignmentPoints').value;
            const course = document.getElementById('assignmentCourse').value;

            if (!title || !dueDate || !course) {
                alert('দয়া করে সব প্রয়োজনীয় ক্ষেত্র পূরণ করুন');
                return;
            }

            const newAssignment = {
                id: 'assign_' + Date.now(),
                title: title,
                instructions: instructions,
                dueDate: dueDate,
                points: points,
                course: course,
                teacher: currentUser.email,
                created: new Date().toISOString()
            };

            assignments.push(newAssignment);
            localStorage.setItem('assignments', JSON.stringify(assignments));
            closeModal('assignmentModal');
            showAssignments();
            alert('অ্যাসাইনমেন্ট সফলভাবে তৈরি হয়েছে!');
        }

        // Sample Data Initialization
        function initializeSampleData() {
            // Only create sample data if user is a teacher
            if (currentUser.role === 'teacher') {
                courses = [
                    {
                        id: 'math101',
                        name: 'গণিত ১০১',
                        code: 'MATH01',
                        description: 'বীজগণিত ও ক্যালকুলাসের পরিচিতি',
                        subject: 'mathematics',
                        teacher: currentUser.email,
                        teacherName: currentUser.name,
                        created: new Date().toISOString()
                    }
                ];

                assignments = [
                    {
                        id: 'assign1',
                        title: 'বীজগণিত সমস্যা সেট',
                        instructions: 'অধ্যায় ৩ থেকে ১-২০ নম্বর সমস্যা সমাধান করুন',
                        course: 'গণিত ১০১',
                        dueDate: '2025-07-20T23:59',
                        points: 100,
                        teacher: currentUser.email,
                        created: new Date().toISOString()
                    }
                ];

                localStorage.setItem('courses', JSON.stringify(courses));
                localStorage.setItem('assignments', JSON.stringify(assignments));
            }
        }

        // Placeholder functions for additional features
        function viewCourse(id) { alert('কোর্স দেখার কার্যকারিতা (ডেমো)'); }
        function editCourse(id) { alert('কোর্স সম্পাদনার কার্যকারিতা (ডেমো)'); }
        function inviteStudents(id) {
            const course = courses.find(c => c.id === id);
            if (course) {
                alert(`এই ক্লাস কোডটি ছাত্রদের সাথে শেয়ার করুন: ${course.code}\n\nঅথবা ক্লাস কোড সহ ইমেইলে আমন্ত্রণ পাঠান।`);
            }
        }
        function editAssignment(id) { alert('অ্যাসাইনমেন্ট সম্পাদনার কার্যকারিতা (ডেমো)'); }
        function submitAssignment(id) { alert('অ্যাসাইনমেন্ট জমা দেওয়ার কার্যকারিতা (ডেমো)'); }
        function viewSubmissions(id) { alert('জমা দেখার কার্যকারিতা (ডেমো)'); }
        function uploadFile() { alert('ফাইল আপলোডের কার্যকারিতা (ডেমো)'); }
        function downloadFile(id) { alert('ফাইল ডাউনলোডের কার্যকারিতা (ডেমো)'); }
        function createAnnouncement() { alert('ঘোষণা তৈরির কার্যকারিতা (ডেমো)'); }
        function editAnnouncement(id) { alert('ঘোষণা সম্পাদনার কার্যকারিতা (ডেমো)'); }
        function deleteAnnouncement(id) { alert('ঘোষণা মুছে ফেলার কার্যকারিতা (ডেমো)'); }
        function replyToAnnouncement(id) { alert('ঘোষণার উত্তর দেওয়ার কার্যকারিতা (ডেমো)'); }
        function addNewUser() { alert('নতুন ইউজার যোগ করার কার্যকারিতা (ডেমো)'); }
        function bulkUploadUsers() { alert('বাল্ক ইউজার আপলোডের কার্যকারিতা (ডেমো)'); }
        function editUser(email) { alert('ইউজার সম্পাদনার কার্যকারিতা (ডেমো)'); }
        function deactivateUser(email) { alert('ইউজার নিষ্ক্রিয় করার কার্যকারিতা (ডেমো)'); }
        function exportAuditLogs() { alert('অডিট লগ এক্সপোর্টের কার্যকারিতা (ডেমো)'); }

        // Initialize the application
        window.onload = function () {
            // Application will initialize based on login status
        };

    </script>
</body>

</html>