<!DOCTYPE html>
<html lang="bn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ক্লাসরুম</title>
    <link rel="stylesheet" href="course-detail.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS and Icons for classwork.html -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- classwork.css is already merged into course-detail.css -->
</head>

<body>
    <div class="app-container">
        <!-- Enhanced Header -->
        <header class="app-header">
            <div class="header-left">
                <button class="menu-btn" id="menuBtn">
                    <span class="material-icons">menu</span>
                </button>
                <h1 class="logo-text">ক্লাসরুম</h1>
            </div>
            <div class="header-right">
                <button class="header-icon-btn">
                    <span class="material-icons">notifications</span>
                </button>
                <button class="header-icon-btn">
                    <span class="material-icons">apps</span>
                </button>
                <div class="user-avatar">
                    <span id="userInitial">U</span>
                </div>
            </div>
        </header>

        <!-- Enhanced Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-content">
                <div class="current-course-section">
                    <div class="current-course-header">
                        <span class="material-icons">class</span>
                        <span class="course-name-text" id="currentCourseName">কোর্স লোড হচ্ছে...</span>
                    </div>
                </div>

                <div class="sidebar-header">
                    <span class="material-icons">dashboard</span>
                    <span class="sidebar-text">মেনু</span>
                </div>

                <a href="#" class="sidebar-item" id="classesLink">
                    <span class="material-icons">home</span>
                    <span class="sidebar-text">ক্লাসরুম</span>
                </a>

                <a href="#" class="sidebar-item">
                    <span class="material-icons">assignment</span>
                    <span class="sidebar-text">কাজ</span>
                </a>

                <a href="#" class="sidebar-item">
                    <span class="material-icons">people</span>
                    <span class="sidebar-text">ব্যক্তিগত</span>
                </a>

                <a href="#" class="sidebar-item">
                    <span class="material-icons">grade</span>
                    <span class="sidebar-text">গ্রেড</span>
                </a>

                <a href="#" class="sidebar-item" id="settingsLink">
                    <span class="material-icons">settings</span>
                    <span class="sidebar-text">সেটিংস</span>
                </a>

                <div class="sidebar-header">
                    <span class="material-icons">school</span>
                    <span class="sidebar-text">নথিভুক্ত ক্লাস</span>
                </div>

                <div id="enrolledClasses">
                    <!-- Enrolled classes will be populated here -->
                </div>
            </div>
        </aside>

        <!-- Enhanced Top Navigation -->
        <nav class="course-top-nav" id="courseTopNav">
            <div class="top-nav-tabs">
                <button class="top-nav-tab active" data-tab="stream">
                    <i class="material-icons">dynamic_feed</i>
                    <span>স্ট্রিম</span>
                </button>
                <button class="top-nav-tab" data-tab="classwork">
                    <i class="material-icons">assignment</i>
                    <span>ক্লাসওয়ার্ক</span>
                </button>
                <button class="top-nav-tab" data-tab="people">
                    <i class="material-icons">people</i>
                    <span>ব্যক্তিগত</span>
                </button>
                <button class="top-nav-tab" data-tab="grades">
                    <i class="material-icons">grade</i>
                    <span>গ্রেড</span>
                </button>
            </div>
        </nav>


        <!-- Enhanced Content Wrapper -->
        <main class="content-wrapper" id="contentWrapper">
            <div class="content-inner">
                <!-- Enhanced Course Header -->
                <section class="course-header-section">
                    <div class="course-banner" id="courseBanner">
                        <div class="banner-content">
                            <h1 class="course-title" id="courseTitle">কোর্স লোড হচ্ছে...</h1>
                            <p class="course-section" id="courseSection">সেকশন লোড হচ্ছে...
                            </p>

                            <!-- Course additional info -->
                            <div class="course-additional-info">
                                <p id="courseCode">কোর্স কোড: ---</p>
                                <p id="studentsCount">শিক্ষার্থী: --- জন</p>
                                <p id="teacherName">শিক্ষক: ---</p>
                            </div>
                        </div>
                        <button class="banner-menu-btn">
                            <span class="material-icons">more_vert</span>
                        </button>
                    </div>
                </section>

                <!-- Enhanced Main Content -->
                <section class="main-content">
                    <!-- Stream Tab -->
                    <div id="stream" class="tab-content active">
                        <div class="stream-layout">
                            <div class="stream-sidebar">
                                <div class="upcoming-section">
                                    <h2>আসন্ন</h2>
                                    <div class="upcoming-message">
                                        <p>এখানে আপনার ক্লাস আপডেট দেখুন</p>
                                    </div>
                                    <a href="#" class="view-all-link">
                                        সব দেখুন
                                        <span class="material-icons">arrow_forward</span>
                                    </a>
                                </div>
                            </div>

                            <div class="stream-main">
                                <!-- Enhanced Announcement Input -->
                                <div class="announcement-input">
                                    <div class="input-container" id="announcementTrigger">
                                        <div class="input-avatar">
                                            <span id="teacherInitial">T</span>
                                        </div>
                                        <input type="text" placeholder="ক্লাসে কিছু ঘোষণা করুন..." readonly>
                                    </div>

                                    <div class="announcement-form-expanded" id="announcementFormExpanded"
                                        style="display: none;">
                                        <div class="rich-editor">
                                            <div class="editor-toolbar">
                                                <button class="toolbar-btn" data-command="bold">
                                                    <span class="material-icons">format_bold</span>
                                                </button>
                                                <button class="toolbar-btn" data-command="italic">
                                                    <span class="material-icons">format_italic</span>
                                                </button>
                                                <button class="toolbar-btn" data-command="underline">
                                                    <span class="material-icons">format_underlined</span>
                                                </button>
                                                <button class="toolbar-btn" data-command="createLink">
                                                    <span class="material-icons">link</span>
                                                </button>
                                                <button class="toolbar-btn" data-command="insertUnorderedList">
                                                    <span class="material-icons">format_list_bulleted</span>
                                                </button>
                                                <button class="toolbar-btn" data-command="insertOrderedList">
                                                    <span class="material-icons">format_list_numbered</span>
                                                </button>
                                            </div>
                                            <div class="editor-content" id="editorContent" contenteditable="true"
                                                placeholder="আপনার ঘোষণা লিখুন..."></div>
                                        </div>
                                        <div class="form-actions">
                                            <button class="btn-cancel" id="cancelAnnouncement">বাতিল</button>
                                            <button class="btn-primary" id="postAnnouncement">পোস্ট</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Enhanced Stream Posts -->
                                <div class="stream-posts" id="streamPosts">
                                    <!-- Posts will be populated here -->
                                </div>

                                <!-- Enhanced No Posts -->
                                <div class="no-posts" id="noPosts" style="display: none;">
                                    <div class="no-posts-icon">
                                        <span class="material-icons">forum</span>
                                    </div>
                                    <h3>কোন পোস্ট নেই</h3>
                                    <p>অ্যাসাইনমেন্ট এবং ঘোষণা এখানে প্রদর্শিত হবে</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Classwork Tab - Content from classwork.html -->
                    <div id="classwork" class="tab-content">
                        <div class="classwork-container" id="classworkContent">
                            <div class="classwork-header">
                                <h2 class="classwork-title">
                                    <span class="material-icons">assignment</span>
                                    ক্লাসওয়ার্ক
                                </h2>
                                <button class="empty-action-btn" id="createClassworkBtnEmpty">
                                    <span class="material-icons">add</span>
                                    নতুন ক্লাসওয়ার্ক তৈরি করুন
                                </button>
                            </div>
                            <div class="assignments-list" id="assignmentsList">
                                <!-- Assignments will be loaded here -->
                            </div>
                            <!-- <div class="tab-empty enhanced" id="noClasswork" style="display: none;">
                                <div class="empty-icon">
                                    <span class="material-icons">assignment</span>
                                </div>
                                <h3>কোন ক্লাসওয়ার্ক নেই</h3>
                                <p>শিক্ষকদের দ্বারা তৈরি অ্যাসাইনমেন্ট এবং অন্যান্য কাজ এখানে প্রদর্শিত হবে।</p>
                                <button class="empty-action-btn" id="createClassworkBtnEmpty">
                                    <span class="material-icons">add</span>
                                    নতুন ক্লাসওয়ার্ক তৈরি করুন
                                </button>
                            </div> -->
                        </div>

                        <!-- Create Options Overlay (initially hidden) -->
                        <div class="create-options-overlay" id="createOptionsOverlay">
                            <div class="create-options-card">
                                <div class="create-options-header">
                                    <h3>তৈরি করুন</h3>
                                    <button class="close-create-options" id="closeCreateOptions">
                                        <span class="material-icons">close</span>
                                    </button>
                                </div>
                                <ul class="create-options-list">
                                    <li class="create-option-item" data-type="assignment">
                                        <span class="material-icons">assignment</span>
                                        অ্যাসাইনমেন্ট
                                    </li>
                                    <li class="create-option-item" data-type="quiz">
                                        <span class="material-icons">quiz</span>
                                        কুইজ অ্যাসাইনমেন্ট
                                    </li>
                                    <li class="create-option-item" data-type="question">
                                        <span class="material-icons">help_outline</span>
                                        প্রশ্ন
                                    </li>
                                    <li class="create-option-item" data-type="material">
                                        <span class="material-icons">book</span>
                                        উপকরণ
                                    </li>
                                    <li class="create-option-item" data-type="reuse">
                                        <span class="material-icons">cached</span>
                                        পোস্ট পুনরায় ব্যবহার করুন
                                    </li>
                                    <li class="create-option-item" data-type="topic">
                                        <span class="material-icons">topic</span>
                                        বিষয়
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- Assignment Creation Page (initially hidden) -->
                        <div class="assignment-creation-page" id="assignmentCreationPage" style="display: none;">
                            <!-- Header (from classwork.html, adjusted for integration) -->
                            <header class="header shadow-sm" style="position: static; margin-bottom: 20px;">
                                <div class="container-fluid">
                                    <div class="row align-items-center">
                                        <div class="col-auto">
                                            <div class="header-left">
                                                <!-- Removed close-btn as it's not needed in a tab -->
                                                <div class="assignment-icon">
                                                    <i class="bi bi-file-text"></i>
                                                </div>
                                                <h1 class="header-title mb-0">Assignment</h1>
                                            </div>
                                        </div>
                                        <div class="col-auto ms-auto">
                                            <div class="header-right">
                                                <button class="btn btn-primary assign-btn"
                                                    onclick="courseManager.createAssignment()">
                                                    <i class="bi bi-check-lg me-1"></i>Assign
                                                </button>
                                                <div class="dropdown">
                                                    <button class="btn btn-link assign-dropdown" type="button"
                                                        data-bs-toggle="dropdown">
                                                        <i class="bi bi-chevron-down"></i>
                                                    </button>
                                                    <ul class="dropdown-menu">
                                                        <li><a class="dropdown-item" href="#">Save draft</a></li>
                                                        <li><a class="dropdown-item" href="#">Schedule</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </header>

                            <!-- Main Content (from classwork.html) -->
                            <div class="container-fluid main-content" style="padding-top: 0;">
                                <div class="row">
                                    <!-- Left Panel -->
                                    <div class="col-lg-8 col-12">
                                        <div class="card left-panel shadow-sm border-0">
                                            <div class="card-body">
                                                <!-- Title Input -->
                                                <div class="form-group mb-4">
                                                    <label for="assignmentTitle" class="form-label">
                                                        Title <span class="required">*</span>
                                                    </label>
                                                    <input type="text" class="form-control title-input"
                                                        id="assignmentTitle" placeholder="Title">
                                                    <div id="titleError" class="required-text d-none">
                                                        <i class="bi bi-exclamation-circle me-1"></i>This is a required
                                                        question
                                                    </div>
                                                </div>

                                                <!-- Instructions -->
                                                <div class="form-group mb-4">
                                                    <label class="form-label">Instructions (optional)</label>
                                                    <div class="card instructions-container border">
                                                        <div class="card-header formatting-toolbar bg-light py-2">
                                                            <div class="btn-group" role="group">
                                                                <button type="button"
                                                                    class="btn btn-sm btn-outline-secondary format-btn"
                                                                    onclick="courseManager.formatText('bold')">
                                                                    <strong>B</strong>
                                                                </button>
                                                                <button type="button"
                                                                    class="btn btn-sm btn-outline-secondary format-btn"
                                                                    onclick="courseManager.formatText('italic')">
                                                                    <em>I</em>
                                                                </button>
                                                                <button type="button"
                                                                    class="btn btn-sm btn-outline-secondary format-btn"
                                                                    onclick="courseManager.formatText('underline')">
                                                                    <u>U</u>
                                                                </button>
                                                                <button type="button"
                                                                    class="btn btn-sm btn-outline-secondary format-btn"
                                                                    onclick="courseManager.formatText('strikeThrough')">
                                                                    <s>S</s>
                                                                </button>
                                                            </div>
                                                        </div>
                                                        <div class="card-body p-0">
                                                            <div class="instructions-editor p-3" id="instructionsEditor"
                                                                contenteditable="true"
                                                                data-placeholder="Provide instructions for your students (optional)">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Attachments -->
                                                <div class="attach-section">
                                                    <label class="attach-label">Attach</label>
                                                    <div class="row attach-options g-3">
                                                        <div class="col-6 col-md-auto">
                                                            <div class="attach-option text-center"
                                                                onclick="courseManager.openDriveAttach()">
                                                                <div class="attach-icon drive-icon mb-2">
                                                                    <i class="bi bi-google"></i>
                                                                </div>
                                                                <small class="attach-text">Drive</small>
                                                            </div>
                                                        </div>
                                                        <div class="col-6 col-md-auto">
                                                            <div class="attach-option text-center"
                                                                onclick="courseManager.openYouTubeAttach()">
                                                                <div class="attach-icon youtube-icon mb-2">
                                                                    <i class="bi bi-youtube"></i>
                                                                </div>
                                                                <small class="attach-text">YouTube</small>
                                                            </div>
                                                        </div>
                                                        <div class="col-6 col-md-auto">
                                                            <div class="attach-option text-center"
                                                                onclick="courseManager.openCreateNew()">
                                                                <div class="attach-icon create-icon mb-2">
                                                                    <i class="bi bi-plus-circle"></i>
                                                                </div>
                                                                <small class="attach-text">Create</small>
                                                            </div>
                                                        </div>
                                                        <div class="col-6 col-md-auto">
                                                            <div class="attach-option text-center"
                                                                onclick="courseManager.openFileUpload()">
                                                                <div class="attach-icon upload-icon mb-2">
                                                                    <i class="bi bi-upload"></i>
                                                                </div>
                                                                <small class="attach-text">Upload</small>
                                                            </div>
                                                        </div>
                                                        <div class="col-6 col-md-auto">
                                                            <div class="attach-option text-center"
                                                                onclick="courseManager.openLinkAttach()">
                                                                <div class="attach-icon link-icon mb-2">
                                                                    <i class="bi bi-link-45deg"></i>
                                                                </div>
                                                                <small class="attach-text">Link</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Right Panel -->
                                    <div class="col-lg-4 col-12">
                                        <div class="right-panel">
                                            <!-- Course Selection -->
                                            <div class="card panel-card shadow-sm border-0 mb-3">
                                                <div class="card-body">
                                                    <label class="panel-title">For</label>
                                                    <select class="form-select dropdown" id="courseSelect">
                                                        <option>CSE479 - Advanced Programming</option>
                                                        <option>CSE101 - Introduction to Programming</option>
                                                        <option>CSE201 - Data Structures</option>
                                                        <option>CSE301 - Database Systems</option>
                                                        <option>CSE401 - Software Engineering</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <!-- Assign To -->
                                            <div class="card panel-card shadow-sm border-0 mb-3">
                                                <div class="card-body">
                                                    <label class="panel-title">Assign to</label>
                                                    <div class="assign-to-section"
                                                        onclick="courseManager.openStudentSelection()">
                                                        <i class="bi bi-people students-icon"></i>
                                                        <span class="assign-to-text" id="assignToText">All
                                                            students</span>
                                                        <i class="bi bi-chevron-right ms-auto"></i>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Points -->
                                            <div class="card panel-card shadow-sm border-0 mb-3">
                                                <div class="card-body">
                                                    <label class="panel-title">Points</label>
                                                    <select class="form-select dropdown" id="pointsSelect">
                                                        <option value="100">100</option>
                                                        <option value="50">50</option>
                                                        <option value="20">20</option>
                                                        <option value="10">10</option>
                                                        <option value="ungraded">Ungraded</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <!-- Due Date -->
                                            <div class="card panel-card shadow-sm border-0 mb-3">
                                                <div class="card-body">
                                                    <label class="panel-title">Due</label>
                                                    <input type="date" class="form-control date-input" id="dueDate">
                                                </div>
                                            </div>

                                            <!-- Topic -->
                                            <div class="card panel-card shadow-sm border-0 mb-3">
                                                <div class="card-body">
                                                    <label class="panel-title">Topic</label>
                                                    <select class="form-select dropdown" id="topicSelect">
                                                        <option>No topic</option>
                                                        <option>Assignments</option>
                                                        <option>Projects</option>
                                                        <option>Quizzes</option>
                                                        <option>Exams</option>
                                                        <option>Lab Work</option>
                                                        <option>Homework</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <!-- Rubric -->
                                            <div class="card panel-card shadow-sm border-0">
                                                <div class="card-body">
                                                    <label class="panel-title">Rubric</label>
                                                    <button class="btn btn-outline-primary rubric-btn w-100"
                                                        onclick="courseManager.createRubric()">
                                                        <i class="bi bi-plus plus-icon me-2"></i>
                                                        Rubric
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Help Icon (from classwork.html) -->
                            <div class="help-icon" data-bs-toggle="tooltip" data-bs-placement="left" title="Get help">
                                <i class="bi bi-question"></i>
                            </div>

                            <!-- File Input (from classwork.html) -->
                            <input type="file" id="fileInput" class="file-input" multiple
                                onchange="courseManager.handleFileUpload(event)">

                            <!-- Modals (from classwork.html) -->
                            <!-- Link Modal -->
                            <div class="modal fade" id="linkModal" tabindex="-1">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">Add Link</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="mb-3">
                                                <label class="form-label">URL</label>
                                                <input type="url" class="form-control" id="linkUrl"
                                                    placeholder="Paste link here">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Title (optional)</label>
                                                <input type="text" class="form-control" id="linkTitle"
                                                    placeholder="Add title">
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Cancel</button>
                                            <button type="button" class="btn btn-primary"
                                                onclick="courseManager.addLink()">Add
                                                Link</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- YouTube Modal -->
                            <div class="modal fade" id="youtubeModal" tabindex="-1">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">Add YouTube Video</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="mb-3">
                                                <label class="form-label">YouTube URL</label>
                                                <input type="url" class="form-control" id="youtubeUrl"
                                                    placeholder="Paste YouTube link here">
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Cancel</button>
                                            <button type="button" class="btn btn-primary"
                                                onclick="courseManager.addYouTube()">Add
                                                Video</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Student Selection Modal -->
                            <div class="modal fade" id="studentModal" tabindex="-1">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">Assign to Students</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="mb-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="assignType"
                                                        id="allStudents" value="all" checked
                                                        onchange="courseManager.updateAssignType()">
                                                    <label class="form-check-label" for="allStudents">
                                                        All students
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="assignType"
                                                        id="specificStudents" value="specific"
                                                        onchange="courseManager.updateAssignType()">
                                                    <label class="form-check-label" for="specificStudents">
                                                        Specific students
                                                    </label>
                                                </div>
                                            </div>
                                            <div id="studentList" class="d-none">
                                                <label class="form-label">Select students:</label>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="student1">
                                                    <label class="form-check-label" for="student1">John Doe</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="student2">
                                                    <label class="form-check-label" for="student2">Jane Smith</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="student3">
                                                    <label class="form-check-label" for="student3">Bob Johnson</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="student4">
                                                    <label class="form-check-label" for="student4">Alice Brown</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="student5">
                                                    <label class="form-check-label" for="student5">Charlie Davis</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Cancel</button>
                                            <button type="button" class="btn btn-primary"
                                                onclick="courseManager.updateStudentAssignment()">Update</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- People Tab -->
                    <div id="people" class="tab-content">
                        <div class="tab-empty">
                            <div class="empty-icon">
                                <span class="material-icons">people</span>
                            </div>
                            <h3>ক্লাস তালিকা</h3>
                            <p>শিক্ষার্থী এবং শিক্ষকরা এখানে প্রদর্শিত হবে</p>
                        </div>
                    </div>

                    <!-- Grades Tab -->
                    <div id="grades" class="tab-content">
                        <div class="tab-empty">
                            <div class="empty-icon">
                                <span class="material-icons">grade</span>
                            </div>
                            <h3>এখনও কোন গ্রেড নেই</h3>
                            <p>শিক্ষার্থীদের গ্রেড এখানে প্রদর্শিত হবে</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="course-detail.js"></script>
    <!-- classwork.js functionality -->
    <script>
        // Global variables for classwork.js functionality
        // These are now managed within the CourseDetailManager class
        // let attachments = [];
        // let selectedStudents = [];
        // let assignToAll = true;

        // Format text in instructions editor
        // function formatText(command) {
        //     document.execCommand(command, false, null);
        //     document.getElementById("instructionsEditor").focus();
        // }

        // File upload handler
        // function handleFileUpload(event) {
        //     const files = event.target.files;
        //     for (let file of files) {
        //         attachments.push({
        //             type: "file",
        //             name: file.name,
        //             size: file.size,
        //             file: file,
        //         });
        //     }
        //     updateAttachments();
        // }

        // Open file upload dialog
        // function openFileUpload() {
        //     document.getElementById("fileInput").click();
        // }

        // Open link attachment modal
        // function openLinkAttach() {
        //     const linkModal = new bootstrap.Modal(document.getElementById("linkModal"));
        //     linkModal.show();
        // }

        // Open YouTube attachment modal
        // function openYouTubeAttach() {
        //     const youtubeModal = new bootstrap.Modal(
        //         document.getElementById("youtubeModal")
        //     );
        //     youtubeModal.show();
        // }

        // Open Drive attachment (simulated)
        // function openDriveAttach() {
        //     // Create a toast notification instead of alert
        //     showToast(
        //         "Google Drive integration would open here in a real implementation",
        //         "info"
        //     );
        // }

        // Open create new document (simulated)
        // function openCreateNew() {
        //     const options = [
        //         "Google Docs",
        //         "Google Slides",
        //         "Google Sheets",
        //         "Google Forms",
        //     ];
        //     const choice = prompt(
        //         "What would you like to create?\n" + options.join("\n")
        //     );
        //     if (choice) {
        //         showToast(`Creating new ${choice} document...`, "success");
        //     }
        // }

        // Add link attachment
        // function addLink() {
        //     const url = document.getElementById("linkUrl").value;
        //     const title = document.getElementById("linkTitle").value || url;
        //     if (url) {
        //         attachments.push({
        //             type: "link",
        //             url: url,
        //             title: title,
        //         });
        //         updateAttachments();
        //         const linkModal = bootstrap.Modal.getInstance(
        //             document.getElementById("linkModal")
        //         );
        //         linkModal.hide();
        //         document.getElementById("linkUrl").value = "";
        //         document.getElementById("linkTitle").value = "";
        //         showToast("Link attached successfully", "success");
        //     }
        // }

        // Add YouTube video
        // function addYouTube() {
        //     const url = document.getElementById("youtubeUrl").value;
        //     if ((url && url.includes("youtube.com")) || url.includes("youtu.be")) {
        //         attachments.push({
        //             type: "youtube",
        //             url: url,
        //             title: "YouTube Video",
        //         });
        //         updateAttachments();
        //         const youtubeModal = bootstrap.Modal.getInstance(
        //             document.getElementById("youtubeModal")
        //         );
        //         youtubeModal.hide();
        //         document.getElementById("youtubeUrl").value = "";
        //         showToast("YouTube video attached successfully", "success");
        //     } else {
        //         showToast("Please enter a valid YouTube URL", "error");
        //     }
        // }

        // Open student selection modal
        // function openStudentSelection() {
        //     const studentModal = new bootstrap.Modal(
        //         document.getElementById("studentModal")
        //     );
        //     studentModal.show();
        // }

        // Update assignment type (all vs specific students)
        // function updateAssignType() {
        //     const isSpecific =
        //         document.querySelector('input[name="assignType"]:checked').value ===
        //         "specific";
        //     const studentList = document.getElementById("studentList");
        //     if (isSpecific) {
        //         studentList.classList.remove("d-none");
        //     } else {
        //         studentList.classList.add("d-none");
        //     }
        // }

        // Update student assignment
        // function updateStudentAssignment() {
        //     const assignType = document.querySelector(
        //         'input[name="assignType"]:checked'
        //     ).value;
        //     if (assignType === "all") {
        //         assignToAll = true;
        //         document.getElementById("assignToText").textContent = "All students";
        //     } else {
        //         const checkboxes = document.querySelectorAll(
        //             '#studentList input[type="checkbox"]:checked'
        //         );
        //         selectedStudents = Array.from(checkboxes).map((cb) =>
        //             cb.nextSibling.textContent.trim()
        //         );
        //         if (selectedStudents.length > 0) {
        //             assignToAll = false;
        //             const text =
        //                 selectedStudents.length === 1
        //                     ? selectedStudents[0]
        //                     : `${selectedStudents.length} students`;
        //             document.getElementById("assignToText").textContent = text;
        //         } else {
        //             showToast("Please select at least one student", "error");
        //             return;
        //         }
        //     }
        //     const studentModal = bootstrap.Modal.getInstance(
        //         document.getElementById("studentModal")
        //     );
        //     studentModal.hide();
        // }

        // Update attachments display
        // function updateAttachments() {
        //     console.log("Attachments updated:", attachments);
        // }

        // Create rubric
        // function createRubric() {
        //     showToast(
        //         "Rubric creation interface would open here in a real implementation",
        //         "info"
        //     );
        // }

        // Toggle assign menu
        // function toggleAssignMenu() {
        //     showToast(
        //         "Assign menu options:\n• Save as draft\n• Schedule for later\n• Assign immediately",
        //         "info"
        //     );
        // }

        // Go back to classroom (adjusted for tab context)
        // function goBack() {
        //     // In a tab, this might mean switching back to the stream or just closing a modal
        //     // For now, it will just show a toast.
        //     showToast("You are currently in the Classwork tab.", "info");
        // }

        // Create assignment
        // function createAssignment() {
        //     const title = document.getElementById("assignmentTitle").value.trim();
        //     const instructions = document.getElementById("instructionsEditor").innerHTML;
        //     const course = document.getElementById("courseSelect").value;
        //     const points = document.getElementById("pointsSelect").value;
        //     const dueDate = document.getElementById("dueDate").value;
        //     const topic = document.getElementById("topicSelect").value;

        //     // Validate required fields
        //     const titleError = document.getElementById("titleError");
        //     if (!title) {
        //         titleError.classList.remove("d-none");
        //         document.getElementById("assignmentTitle").focus();
        //         document
        //             .getElementById("assignmentTitle")
        //             .scrollIntoView({ behavior: "smooth" });
        //         return;
        //     } else {
        //         titleError.classList.add("d-none");
        //     }

        //     // Create assignment object
        //     const assignment = {
        //         title: title,
        //         instructions: instructions,
        //         course: course,
        //         points: points,
        //         dueDate: dueDate,
        //         topic: topic,
        //         assignToAll: assignToAll,
        //         selectedStudents: selectedStudents,
        //         attachments: attachments,
        //         createdAt: new Date().toISOString(),
        //     };

        //     // Save assignment (in real implementation, this would send to server)
        //     console.log("Creating assignment:", assignment);

        //     // Show success message
        //     showToast(`Assignment "${title}" has been created successfully!`, "success");

        //     // In real implementation, redirect back to classroom
        //     // window.location.href = 'classroom.html';
        // }

        // Toast notification function (re-used from course-detail.js if available, otherwise defined here)
        // This function is already defined in course-detail.js, so we'll rely on that.
        // If course-detail.js is not loaded or showToast is not global, uncomment and use this:
        /*
        function showToast(message, type = "info") {
            const toastContainer =
                document.querySelector(".toast-container") || createToastContainer();

            const toastId = "toast-" + Date.now();
            const iconMap = {
                success: "bi-check-circle-fill text-success",
                error: "bi-exclamation-triangle-fill text-danger",
                info: "bi-info-circle-fill text-primary",
            };

            const toastHtml = `
                <div id="${toastId}" class="toast align-items-center border-0 shadow-lg" role="alert" style="background: rgba(255,255,255,0.95); backdrop-filter: blur(10px);">
                    <div class="d-flex">
                        <div class="toast-body d-flex align-items-center">
                            <i class="bi ${iconMap[type] || iconMap.info} me-2"></i>
                            ${message}
                        </div>
                        <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast"></button>
                    </div>
                </div>
            `;

            toastContainer.insertAdjacentHTML("beforeend", toastHtml);
            const toastElement = document.getElementById(toastId);
            const toast = new bootstrap.Toast(toastElement, { delay: 4000 });
            toast.show();

            toastElement.addEventListener("hidden.bs.toast", () => {
                toastElement.remove();
            });
        }

        function createToastContainer() {
            const container = document.createElement("div");
            container.className = "toast-container position-fixed bottom-0 end-0 p-3";
            container.style.zIndex = "1050";
            document.body.appendChild(container);
            return container;
        }
        */

        // Initialize tooltips and set default due date for classwork tab
        document.addEventListener("DOMContentLoaded", function () {
            // Only initialize if the classwork tab is active or elements exist
            const classworkTab = document.getElementById('classwork');
            if (classworkTab && classworkTab.classList.contains('active')) {
                // Initialize Bootstrap tooltips
                const tooltipTriggerList = [].slice.call(
                    document.querySelectorAll('[data-bs-toggle="tooltip"]')
                );
                tooltipTriggerList.map(function (tooltipTriggerEl) {
                    return new bootstrap.Tooltip(tooltipTriggerEl);
                });

                // Set default due date (tomorrow)
                const dueDateInput = classworkTab.querySelector("#dueDate");
                if (dueDateInput) {
                    const tomorrow = new Date();
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    dueDateInput.value = tomorrow
                        .toISOString()
                        .split("T")[0];
                }

                // Add smooth scrolling for focus events
                const assignmentTitleInput = classworkTab.querySelector("#assignmentTitle");
                if (assignmentTitleInput) {
                    assignmentTitleInput.addEventListener("focus", function () {
                        this.scrollIntoView({ behavior: "smooth", block: "center" });
                    });
                }
            }
        });

        // Enhanced modal backdrop click handling (re-used from course-detail.js if available)
        // This is already handled by Bootstrap's modal.
    </script>
</body>

</html>