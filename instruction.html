<!DOCTYPE html>
<html lang="bn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ক্লাসরুম - Assignment</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        /* Enhanced Professional Design - Inherited from stream.css */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #1976d2;
            --primary-hover: #1565c0;
            --secondary-color: #4caf50;
            --background-color: #f8f9fa;
            --surface-color: #ffffff;
            --text-primary: #1a1a1a;
            --text-secondary: #5f6368;
            --border-color: #e8eaed;
            --shadow-light: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-medium: 0 4px 16px rgba(0, 0, 0, 0.12);
            --shadow-heavy: 0 8px 32px rgba(0, 0, 0, 0.16);
            --border-radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: linear-gradient(135deg, white 0%, white 100%);
            color: var(--text-primary);
            line-height: 1.6;
            font-weight: 400;
            overflow-x: hidden;
        }

        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Enhanced Header - Same as stream.html */
        .app-header {
            background: var(--surface-color);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: var(--shadow-light);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .menu-btn {
            background: none;
            border: none;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            position: relative;
        }

        .menu-btn:hover {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            transform: scale(1.02);
        }

        .menu-btn .material-icons {
            font-size: 22px;
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .menu-btn:hover .material-icons {
            color: var(--primary-color);
        }

        .logo-text {
            font-size: 24px;
            font-weight: 500;
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-icon-btn {
            background: none;
            border: none;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            position: relative;
        }

        .header-icon-btn:hover {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            transform: scale(1.02);
        }

        .header-icon-btn .material-icons {
            font-size: 22px;
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .header-icon-btn:hover .material-icons {
            color: var(--primary-color);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            font-weight: 600;
            flex-shrink: 0;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .user-avatar:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-medium);
        }

        #userInitial {
            color: white;
            font-size: 16px;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* Enhanced Sidebar - Same as stream.html */
        .sidebar {
            position: fixed;
            top: 64px;
            left: 0;
            width: 72px;
            height: calc(100vh - 64px);
            background: var(--surface-color);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            overflow-x: hidden;
            z-index: 999;
            transition: var(--transition);
            box-shadow: var(--shadow-light);
        }

        .sidebar.open {
            width: 300px;
        }

        .sidebar-content {
            padding: 20px 0;
        }

        .current-course-section {
            margin-bottom: 32px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 20px;
        }

        .current-course-header {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 24px;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            margin: 0 12px;
            border-radius: var(--border-radius);
            color: var(--primary-color);
            font-weight: 600;
            transition: var(--transition);
            box-shadow: var(--shadow-light);
        }

        .current-course-header:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-medium);
        }

        .current-course-header .material-icons {
            font-size: 24px;
            min-width: 24px;
        }

        .course-name-text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 16px;
            font-weight: 500;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 24px;
            margin: 6px 12px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 15px;
            position: relative;
            border-radius: var(--border-radius);
            text-decoration: none;
            color: var(--text-secondary);
        }

        .sidebar-item:hover {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            color: var(--primary-color);
            transform: translateX(2px);
            box-shadow: var(--shadow-light);
        }

        .sidebar-item.active {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            box-shadow: var(--shadow-medium);
        }

        .sidebar-text {
            white-space: nowrap;
            overflow: hidden;
            transition: var(--transition);
        }

        /* When sidebar is closed, hide text and center icons */
        .sidebar:not(.open) .sidebar-text,
        .sidebar:not(.open) .course-name-text {
            opacity: 0;
            width: 0;
            padding: 0;
            margin: 0;
        }

        .sidebar:not(.open) .sidebar-item,
        .sidebar:not(.open) .current-course-header {
            justify-content: center;
            padding: 12px 0;
        }

        /* Sidebar Dropdown Styles */
        .sidebar-dropdown {
            position: relative;
        }

        .sidebar-dropdown .sidebar-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-right: 24px;
            /* Adjust padding to make space for arrow */
        }

        .sidebar-dropdown .sidebar-item .dropdown-arrow {
            font-size: 20px;
            transition: transform 0.3s ease;
        }

        .sidebar-dropdown .sidebar-item .dropdown-arrow.rotate {
            transform: rotate(180deg);
        }

        .dropdown-menu-sidebar {
            list-style: none;
            padding: 0;
            margin: 0.5rem 0 0.5rem 2.5rem;
            /* Indent dropdown items */
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 0;
            background: rgba(255, 255, 255, 0.5);
            /* Slightly transparent background */
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
        }

        .dropdown-menu-sidebar.show {
            max-height: 300px;
            /* Adjust as needed for content */
            opacity: 1;
        }

        .dropdown-item-sidebar {
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s ease, color 0.2s ease;
            border-bottom: 1px solid rgba(226, 232, 240, 0.3);
            /* Light separator */
            border-radius: var(--border-radius);
            margin: 4px 0;
        }

        .dropdown-item-sidebar:last-child {
            border-bottom: none;
        }

        .dropdown-item-sidebar:hover {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            color: var(--primary-color);
        }

        .dropdown-item-sidebar.no-courses {
            font-style: italic;
            color: var(--text-muted);
            cursor: default;
        }

        .dropdown-item-sidebar.no-courses:hover {
            background: transparent;
            color: var(--text-muted);
        }

        /* Adjust sidebar width when dropdown is open if needed */
        .sidebar.open .dropdown-menu-sidebar {
            width: calc(100% - 3rem);
            /* Adjust to fit within sidebar padding */
        }

        /* Styling for course names in collapsed sidebar */
        .sidebar:not(.open) .dropdown-item-sidebar {
            text-align: center;
            padding: 0.75rem 0;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            display: block;
            /* Ensure it takes full width for ellipsis */
        }

        .sidebar:not(.open) .dropdown-item-sidebar:hover {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            color: var(--primary-color);
        }

        .sidebar:not(.open) .dropdown-item-sidebar.no-courses {
            display: none;
            /* Hide "No enrolled classes" when sidebar is collapsed */
        }

        /* NEW: Ensure dropdown arrow is centered when sidebar is closed */
        .sidebar:not(.open) .sidebar-dropdown .sidebar-item {
            justify-content: center;
            /* Center content horizontally */
            padding: 12px 0;
            /* Adjust padding to match other items */
        }

        .sidebar:not(.open) .sidebar-dropdown .sidebar-item .dropdown-arrow {
            display: none;
            /* Hide dropdown arrow when sidebar is closed */
        }

        /* Enhanced Content Wrapper - Without top nav */
        .content-wrapper {
            margin-top: 64px;
            margin-left: 72px;
            width: calc(100% - 72px);
            padding: 32px;
            transition: var(--transition);
            min-height: calc(100vh - 64px);
            overflow-y: auto;
            position: relative;
        }

        .content-wrapper.sidebar-open {
            margin-left: 300px;
            width: calc(100% - 300px);
        }

        /* Assignment Page Specific Styles */
        .assignment-page {
            max-width: 100%;
            margin: 0;
            padding: 0;
        }

        /* Course Header Section */
        .course-breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 32px;
            padding: 16px 0;
        }

        .breadcrumb-link {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 20px;
            font-weight: 400;
            transition: var(--transition);
        }

        .breadcrumb-link:hover {
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: var(--text-secondary);
            font-size: 16px;
            margin: 0 4px;
        }

        .breadcrumb-current {
            color: var(--text-primary);
            font-size: 20px;
            font-weight: 400;
        }

        /* Instructions and Student Work Sections */
        .sections-container {
            display: flex;
            flex-direction: column;
            gap: 0;
            align-items: flex-start;
            width: 100%;
        }

        .section-tab {
            background: none;
            border: none;
            padding: 12px 0;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
            margin-right: 32px;
            text-decoration: none;
            outline: none;
        }

        .section-tab:hover {
            color: var(--primary-color);
        }

        .section-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
            font-weight: 500;
        }

        .sections-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 24px;
            width: 100%;
            padding-left: 0;
        }

        /* Tab Content Container */
        .tab-content {
            display: none;
            /* Hidden by default */
            animation: fadeIn 0.5s ease-in-out;
            width: 100%;
        }

        .tab-content.active {
            display: block;
            /* Shown when active */
        }

        /* Instructions Content - Centered with larger width */
        #instructions-content {
            display: flex;
            /* Default display for instructions */
            justify-content: center;
            width: 100%;
        }

        /* Student Work Content - Aligned to the left */
        #student-work-content {
            display: none;
            /* Hidden by default */
            justify-content: flex-start;
            /* Align to the left */
            width: 100%;
            padding-left: 0;
            /* Ensure no extra padding pushing it right */
        }

        #student-work-content.active {
            display: flex;
            /* Shown and aligned left when active */
        }

        /* Assignment Content - Larger width for instructions, smaller for student work */
        .assignment-content {
            background: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--border-color);
            width: 100%;
            margin: 0 auto;
        }

        /* Instructions content gets larger width */
        #instructions-content .assignment-content {
            max-width: 900px;
            /* Larger width for instructions */
        }

        /* Student work wrapper for centering and styling */
        .student-work-wrapper {
            max-width: 100%;
            /* Allow it to take full width */
            width: 100%;
            background: var(--surface-color);
            border-radius: var(--border-radius);
            /* box-shadow: var(--shadow-medium); */
            /* Removed shadow */
            box-shadow: none;
            /* Explicitly remove shadow */
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--border-color);
            margin: 0;
            /* Align to the left */
        }

        .assignment-content:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-heavy);
        }

        /* Removed hover effect for student-work-wrapper to match no shadow */
        .student-work-wrapper:hover {
            transform: none;
            box-shadow: none;
        }


        /* Assignment Header */
        .assignment-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .assignment-meta {
            display: flex;
            align-items: flex-start;
            gap: 16px;
        }

        .assignment-icon {
            width: 48px;
            height: 48px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            flex-shrink: 0;
            box-shadow: var(--shadow-light);
        }

        .assignment-info {
            flex: 1;
        }

        .assignment-title {
            font-size: 32px;
            font-weight: 400;
            color: var(--text-primary);
            margin: 0 0 8px 0;
            line-height: 1.2;
        }

        .assignment-details {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 0;
        }

        .assignment-detail {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .assignment-options {
            margin-left: auto;
            flex-shrink: 0;
        }

        .options-btn {
            background: none;
            border: none;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .options-btn:hover {
            background: rgba(95, 99, 104, 0.1);
            color: var(--primary-color);
        }

        /* Assignment Body */
        .assignment-body {
            padding: 24px;
        }

        .assignment-description {
            color: var(--text-secondary);
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 24px;
        }

        /* Class Comments Section */
        .comments-section {
            padding: 24px;
            border-top: 1px solid var(--border-color);
        }

        .comments-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }

        .comments-header .material-icons {
            font-size: 18px;
        }

        .comment-input-area {
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .comment-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .comment-input {
            flex: 1;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            outline: none;
            transition: var(--transition);
            background: var(--surface-color);
        }

        .comment-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1);
        }

        .send-btn {
            background: none;
            border: none;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .send-btn:hover {
            background: rgba(25, 118, 210, 0.1);
            color: var(--primary-color);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .content-wrapper {
                margin-left: 0;
                width: 100%;
                padding: 16px;
                margin-top: 64px;
            }

            .content-wrapper.sidebar-open {
                margin-left: 0;
                width: 100%;
            }

            .sidebar {
                transform: translateX(-100%);
                width: 300px;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .assignment-meta {
                flex-direction: column;
                gap: 12px;
            }

            .assignment-title {
                font-size: 24px;
            }

            .assignment-details {
                flex-direction: column;
                gap: 8px;
            }

            .sections-tabs {
                flex-direction: column;
                border-bottom: none;
                gap: 8px;
                padding-left: 0;
            }

            .section-tab {
                margin-right: 0;
                padding: 8px 0;
                border-bottom: 1px solid var(--border-color);
                border-right: none;
            }

            .section-tab.active {
                border-bottom-color: var(--primary-color);
            }

            /* Mobile responsive for assignment content */
            #instructions-content .assignment-content,
            #student-work-content .student-work-wrapper {
                max-width: 100%;
                margin: 0;
            }
        }

        /* Print Styles */
        @media print {

            .sidebar,
            .app-header {
                display: none !important;
            }

            .content-wrapper {
                margin: 0 !important;
                width: 100% !important;
                padding: 0 !important;
            }
        }

        /* Student-work.html styles */
        /* The main container from student-work.html is now .student-work-wrapper */

        /* Header Navigation (from student-work.html, but not used in merged context) */
        .nav-header {
            display: none;
            /* Hide this as it's replaced by sections-tabs */
        }

        /* Top Controls */
        .top-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 24px;
            border-bottom: 1px solid #e8eaed;
        }

        .left-controls {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .return-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            border: 1px solid #dadce0;
            border-radius: 4px;
            padding: 8px 16px;
            font-size: 14px;
            color: #3c4043;
            cursor: pointer;
            transition: all 0.2s;
        }

        .return-btn:hover {
            background: #f1f3f4;
        }

        .return-btn .material-icons {
            font-size: 18px;
        }

        .share-btn {
            background: none;
            border: none;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            color: #5f6368;
            transition: all 0.2s;
        }

        .share-btn:hover {
            background: #f8f9fa;
        }

        .share-btn .material-icons {
            font-size: 20px;
        }

        .points-selector {
            display: flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: 1px solid #dadce0;
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 14px;
            color: #3c4043;
            cursor: pointer;
            min-width: 120px;
        }

        .points-selector .material-icons {
            font-size: 18px;
            margin-left: auto;
        }

        .settings-btn {
            background: none;
            border: none;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            color: #5f6368;
            transition: all 0.2s;
        }

        .settings-btn:hover {
            background: #f8f9fa;
        }

        .settings-btn .material-icons {
            font-size: 20px;
        }

        /* Main Content */
        .main-content {
            display: flex;
            /* Adjusted min-height to account for top-controls height */
            min-height: calc(100vh - 64px - 32px - 16px - 24px);
            /* app-header, content-wrapper padding, top-controls padding, sections-tabs margin-bottom */
        }

        /* Left Sidebar */
        .left-sidebar {
            width: 320px;
            border-right: 1px solid #e8eaed;
            padding: 24px;
        }

        .student-filter {
            margin-bottom: 24px;
        }

        .filter-checkbox {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            cursor: pointer;
        }

        .filter-checkbox input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #1976d2;
        }

        .filter-checkbox .material-icons {
            font-size: 20px;
            color: #5f6368;
        }

        .filter-checkbox span {
            font-size: 14px;
            color: #3c4043;
        }

        .sort-dropdown {
            margin-bottom: 24px;
        }

        .sort-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            background: #f8f9fa;
            border: 1px solid #dadce0;
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 14px;
            color: #3c4043;
            cursor: pointer;
        }

        .sort-btn .material-icons {
            font-size: 18px;
        }

        .student-list {
            margin-top: 24px;
        }

        .student-filter-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            cursor: pointer;
        }

        .student-filter-item input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #1976d2;
        }

        .student-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #f1f3f4;
            cursor: pointer;
            transition: all 0.2s;
        }

        .student-item:hover {
            background: #f8f9fa;
            margin: 0 -12px;
            padding: 12px;
            border-radius: 4px;
        }

        .student-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #1976d2;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: 500;
        }

        .student-info {
            flex: 1;
        }

        .student-name {
            font-size: 14px;
            color: #202124;
            font-weight: 400;
        }

        .student-status {
            font-size: 12px;
            margin-top: 2px;
        }

        .status-draft {
            color: #ea4335;
        }

        .status-missing {
            color: #ea4335;
        }

        .student-score {
            font-size: 14px;
            font-weight: 500;
            color: #202124;
        }

        /* Right Content */
        .right-content {
            flex: 1;
            padding: 24px;
        }

        .student-work-assignment-header {
            margin-bottom: 32px;
        }

        .student-work-assignment-title {
            font-size: 32px;
            font-weight: 400;
            color: #202124;
            margin-bottom: 16px;
        }

        .assignment-stats {
            display: flex;
            gap: 40px;
            margin-bottom: 24px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 48px;
            font-weight: 400;
            color: #202124;
            line-height: 1;
        }

        .stat-label {
            font-size: 14px;
            color: #5f6368;
            margin-top: 4px;
        }

        .submission-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 32px;
        }

        .toggle-switch {
            position: relative;
            width: 36px;
            height: 20px;
            background: #dadce0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-switch.disabled {
            background: #dadce0;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .toggle-switch.disabled::after {
            left: 2px;
        }

        .toggle-switch.active-toggle::after {
            left: 18px;
            background: #1976d2;
        }

        .toggle-text {
            font-size: 14px;
            color: #5f6368;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toggle-text .material-icons {
            font-size: 16px;
        }

        .filter-controls {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .filter-all-btn {
            background: none;
            border: 1px solid #dadce0;
            border-radius: 4px;
            padding: 8px 16px;
            font-size: 14px;
            color: #3c4043;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-all-btn .material-icons {
            font-size: 18px;
        }

        .view-toggle {
            background: none;
            border: none;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            color: #5f6368;
        }

        .view-toggle .material-icons {
            font-size: 20px;
        }

        /* Student Detail View */
        .student-detail {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 24px;
        }

        .student-detail-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .student-detail-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: #1976d2;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: 500;
        }

        .student-detail-info h3 {
            font-size: 20px;
            font-weight: 500;
            color: #202124;
            margin-bottom: 4px;
        }

        .student-detail-status {
            font-size: 14px;
            color: #ea4335;
            font-weight: 500;
        }

        /* Help Icon */
        .help-icon {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 48px;
            height: 48px;
            background: white;
            border: 1px solid #dadce0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }

        .help-icon:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .help-icon .material-icons {
            font-size: 20px;
            color: #5f6368;
        }

        /* Responsive Design for Student Work */
        @media (max-width: 768px) {
            .student-work-wrapper .main-content {
                flex-direction: column;
            }

            .student-work-wrapper .left-sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #e8eaed;
            }

            .student-work-wrapper .top-controls {
                flex-direction: column;
                gap: 16px;
                align-items: stretch;
            }

            .student-work-wrapper .left-controls {
                justify-content: space-between;
            }

            .student-work-wrapper .assignment-stats {
                justify-content: center;
            }

            .student-work-wrapper .nav-tabs {
                padding: 0 16px;
            }

            .student-work-wrapper .left-sidebar,
            .student-work-wrapper .right-content {
                padding: 16px;
            }
        }

        @media (max-width: 480px) {
            .student-work-wrapper .student-work-assignment-title {
                font-size: 24px;
            }

            .student-work-wrapper .stat-number {
                font-size: 36px;
            }

            .student-work-wrapper .assignment-stats {
                gap: 20px;
            }
        }
    </style>
</head>

<body>
    <div class="app-container">
        <!-- Enhanced Header - Same as stream.html -->
        <header class="app-header">
            <div class="header-left">
                <button class="menu-btn" id="menuBtn">
                    <span class="material-icons">menu</span>
                </button>
                <h1 class="logo-text">Classroom</h1>
            </div>
            <div class="header-right">
                <button class="header-icon-btn">
                    <span class="material-icons">notifications</span>
                </button>
                <button class="header-icon-btn">
                    <span class="material-icons">apps</span>
                </button>
                <div class="user-avatar">
                    <span id="userInitial">S</span>
                </div>
            </div>
        </header>

        <!-- Enhanced Sidebar - Same as stream.html -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-content">
                <div class="current-course-section">
                    <div class="current-course-header">
                        <span class="material-icons">class</span>
                        <span class="course-name-text" id="currentCourseName">CSE479</span>
                    </div>
                </div>
                <a href="#" class="sidebar-item" id="classesLink">
                    <span class="material-icons">home</span>
                    <span class="sidebar-text">Classes</span>
                </a>
                <!-- Teaching Dropdown -->
                <div class="sidebar-dropdown">
                    <a href="#" class="sidebar-item" id="teachingLink">
                        <span class="material-icons">school</span>
                        <span class="sidebar-text">Teaching</span>
                        <span class="material-icons dropdown-arrow">keyboard_arrow_down</span>
                    </a>
                    <ul class="dropdown-menu-sidebar" id="teachingCoursesDropdown">
                        <!-- Courses will be dynamically inserted here -->
                    </ul>
                </div>
                <a href="#" class="sidebar-item" id="archiveLink">
                    <span class="material-icons">archive</span>
                    <span class="sidebar-text">Archive</span>
                </a>
                <a href="#" class="sidebar-item" id="settingsLink">
                    <span class="material-icons">settings</span>
                    <span class="sidebar-text">Settings</span>
                </a>
            </div>
        </aside>

        <!-- Content Wrapper - Same structure as stream.html -->
        <main class="content-wrapper" id="contentWrapper">
            <div class="assignment-page">
                <!-- Instructions and Student Work Sections -->
                <div class="sections-container">
                    <!-- Section Tabs -->
                    <div class="sections-tabs">
                        <button class="section-tab active"
                            onclick="assignmentManager.switchSection('instructions')">Instructions</button>
                        <button class="section-tab" onclick="assignmentManager.switchSection('student-work')">Student
                            work</button>
                    </div>

                    <!-- Instructions Content -->
                    <div id="instructions-content" class="tab-content active">
                        <div class="assignment-content">
                            <!-- Assignment Header -->
                            <div class="assignment-header">
                                <div class="assignment-meta">
                                    <div class="assignment-icon">
                                        <span class="material-icons">assignment</span>
                                    </div>
                                    <div class="assignment-info">
                                        <h1 class="assignment-title">Project-1</h1>
                                        <div class="assignment-details">
                                            <div class="assignment-detail">
                                                <span>SurePay • Aug 4 (Edited 10:25 PM)</span>
                                            </div>
                                            <div class="assignment-detail">
                                                <span>10 points</span>
                                            </div>
                                            <div class="assignment-detail">
                                                <span>Due Aug 6</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="assignment-options">
                                        <button class="options-btn">
                                            <span class="material-icons">more_vert</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Assignment Body -->
                            <div class="assignment-body">
                                <div class="assignment-description">
                                    Final submission
                                </div>
                            </div>

                            <!-- Class Comments -->
                            <div class="comments-section">
                                <div class="comments-header">
                                    <span class="material-icons">forum</span>
                                    <span>Class comments</span>
                                </div>
                                <div class="comment-input-area">
                                    <div class="comment-avatar">S</div>
                                    <input type="text" class="comment-input" placeholder="Add class comment..."
                                        id="commentInput">
                                    <button class="send-btn" onclick="assignmentManager.postComment()">
                                        <span class="material-icons">send</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Student Work Content (Merged from Student-work.html) -->
                    <div id="student-work-content" class="tab-content">
                        <div class="student-work-wrapper">
                            <!-- Top Controls -->
                            <div class="top-controls">
                                <div class="left-controls">
                                    <button class="return-btn" onclick="studentWorkManager.goBack()">
                                        <span class="material-icons">arrow_back</span>
                                        <span>Return</span>
                                    </button>
                                    <button class="share-btn" onclick="studentWorkManager.shareAssignment()">
                                        <span class="material-icons">share</span>
                                    </button>
                                    <button class="points-selector" onclick="studentWorkManager.togglePointsDropdown()">
                                        <span>10 points</span>
                                        <span class="material-icons">keyboard_arrow_down</span>
                                    </button>
                                </div>
                                <button class="settings-btn" onclick="studentWorkManager.openSettings()">
                                    <span class="material-icons">settings</span>
                                </button>
                            </div>

                            <!-- Main Content -->
                            <div class="main-content">
                                <!-- Left Sidebar -->
                                <div class="left-sidebar">
                                    <!-- Student Filter -->
                                    <div class="student-filter">
                                        <div class="filter-checkbox">
                                            <input type="checkbox" id="all-students" checked
                                                onclick="studentWorkManager.toggleAllStudents()">
                                            <span class="material-icons">people</span>
                                            <span>All students</span>
                                        </div>
                                    </div>

                                    <!-- Sort Dropdown -->
                                    <div class="sort-dropdown">
                                        <button class="sort-btn" onclick="studentWorkManager.toggleSortDropdown()">
                                            <span>Sort by status</span>
                                            <span class="material-icons">keyboard_arrow_down</span>
                                        </button>
                                    </div>

                                    <!-- Filter by Assignment Status -->
                                    <div class="student-list">
                                        <div class="student-filter-item">
                                            <input type="checkbox" id="assigned-filter" checked
                                                onclick="studentWorkManager.toggleAssignedFilter()">
                                            <span>Assigned</span>
                                        </div>

                                        <!-- Student Item -->
                                        <div class="student-item" onclick="studentWorkManager.selectStudent('tanvir')">
                                            <div class="student-avatar">MT</div>
                                            <div class="student-info">
                                                <div class="student-name">MD. TANVIR HOSSAIN</div>
                                                <div class="student-status status-draft">Draft • Missing</div>
                                            </div>
                                            <div class="student-score">0</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Right Content -->
                                <div class="right-content">
                                    <!-- Assignment Header -->
                                    <div class="student-work-assignment-header">
                                        <h1 class="student-work-assignment-title">Project-1</h1>

                                        <!-- Assignment Stats -->
                                        <div class="assignment-stats">
                                            <div class="stat-item">
                                                <div class="stat-number">0</div>
                                                <div class="stat-label">Turned in</div>
                                            </div>
                                            <div class="stat-item">
                                                <div class="stat-number">1</div>
                                                <div class="stat-label">Assigned</div>
                                            </div>
                                        </div>

                                        <!-- Submission Toggle -->
                                        <div class="submission-toggle">
                                            <div class="toggle-switch disabled"
                                                onclick="studentWorkManager.toggleSubmissions()"></div>
                                            <div class="toggle-text">
                                                <span>Not accepting submissions</span>
                                                <span class="material-icons" title="Help">help_outline</span>
                                            </div>
                                        </div>

                                        <!-- Filter Controls -->
                                        <div class="filter-controls">
                                            <button class="filter-all-btn" onclick="studentWorkManager.filterAll()">
                                                <span>All</span>
                                                <span class="material-icons">keyboard_arrow_down</span>
                                            </button>
                                            <button class="view-toggle" onclick="studentWorkManager.toggleView()">
                                                <span class="material-icons">view_module</span>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Student Detail View -->
                                    <div class="student-detail">
                                        <div class="student-detail-header">
                                            <div class="student-detail-avatar">MT</div>
                                            <div class="student-detail-info">
                                                <h3>MD. TANVIR HOSSAIN</h3>
                                                <div class="student-detail-status">Missing</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Help Icon -->
                            <div class="help-icon" onclick="studentWorkManager.showHelp()">
                                <span class="material-icons">help_outline</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        class AssignmentPageManager {
            constructor() {
                this.currentUser = "SurePay";
                this.init();
            }

            init() {
                this.setupElements();
                this.setupEventListeners();
                this.loadUserData();
                this.setupResponsive();
                this.renderTeachingCourses(); // Initial render of teaching courses
            }

            setupElements() {
                this.elements = {
                    menuBtn: document.getElementById("menuBtn"),
                    sidebar: document.getElementById("sidebar"),
                    contentWrapper: document.getElementById("contentWrapper"),
                    userInitial: document.getElementById("userInitial"),
                    currentCourseName: document.getElementById("currentCourseName"),
                    classesLink: document.getElementById("classesLink"),
                    teachingLink: document.getElementById("teachingLink"),
                    teachingCoursesDropdown: document.getElementById("teachingCoursesDropdown"),
                    archiveLink: document.getElementById("archiveLink"),
                    settingsLink: document.getElementById("settingsLink"),
                    commentInput: document.getElementById("commentInput")
                };
            }

            setupEventListeners() {
                // Menu toggle functionality - Same as stream.html
                if (this.elements.menuBtn) {
                    this.elements.menuBtn.addEventListener("click", () => this.toggleSidebar());
                }

                // Navigation links - Same as stream.html
                if (this.elements.classesLink) {
                    this.elements.classesLink.addEventListener("click", (e) => {
                        e.preventDefault();
                        this.goToDashboard();
                    });
                }

                if (this.elements.teachingLink) {
                    this.elements.teachingLink.addEventListener("click", (e) => {
                        e.preventDefault();
                        e.stopPropagation(); // Prevent sidebar from closing if clicked inside
                        this.toggleTeachingDropdown();
                    });
                }

                if (this.elements.archiveLink) {
                    this.elements.archiveLink.addEventListener("click", (e) => {
                        e.preventDefault();
                        this.goToArchive();
                    });
                }

                if (this.elements.settingsLink) {
                    this.elements.settingsLink.addEventListener("click", (e) => {
                        e.preventDefault();
                        this.showNotification("Settings coming soon!", "info");
                    });
                }

                // Comment input functionality
                if (this.elements.commentInput) {
                    this.elements.commentInput.addEventListener("keypress", (e) => {
                        if (e.key === "Enter") {
                            this.postComment();
                        }
                    });
                }

                // Click outside to close sidebar and dropdowns
                document.addEventListener("click", (e) => this.handleClickOutside(e));

                // Window resize handler
                window.addEventListener("resize", () => this.handleResize());
            }

            loadUserData() {
                // Load user data from localStorage or use defaults - Same as stream.html
                this.currentUser = localStorage.getItem("currentUser") || "SurePay";
                this.userRole = localStorage.getItem("userRole") || "teacher";

                this.setUserInitials();
                this.loadCourseData();
            }

            setUserInitials() {
                // Set user initials - Same as stream.html
                const initial = this.currentUser.charAt(0).toUpperCase();
                if (this.elements.userInitial) {
                    this.elements.userInitial.textContent = initial;
                }

                // Set comment avatar initial
                const commentAvatar = document.querySelector(".comment-avatar");
                if (commentAvatar) {
                    commentAvatar.textContent = initial;
                }
            }

            loadCourseData() {
                // Load course data - Same as stream.html
                const selectedCourse = localStorage.getItem("selectedCourse");

                if (selectedCourse) {
                    try {
                        const course = JSON.parse(selectedCourse);
                        if (this.elements.currentCourseName) {
                            this.elements.currentCourseName.textContent = course.name || "CSE479";
                        }
                    } catch (error) {
                        console.error("Error loading course data:", error);
                    }
                }
            }

            toggleSidebar() {
                // Toggle sidebar - Same as stream.html
                this.elements.sidebar.classList.toggle("open");
                this.elements.contentWrapper.classList.toggle("sidebar-open");

                // Add smooth animation effect
                this.elements.sidebar.style.transition = "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)";
                this.elements.contentWrapper.style.transition = "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)";
            }

            switchSection(sectionName) {
                // Remove active class from all tabs
                const tabs = document.querySelectorAll(".section-tab");
                tabs.forEach(tab => tab.classList.remove("active"));

                // Hide all content sections
                const contents = document.querySelectorAll(".tab-content");
                contents.forEach(content => {
                    content.style.display = "none";
                    content.classList.remove("active");
                });

                // Activate selected tab
                const selectedTab = document.querySelector(`[onclick*="${sectionName}"]`);
                const selectedContent = document.getElementById(`${sectionName}-content`);

                if (selectedTab) {
                    selectedTab.classList.add("active");
                }

                if (selectedContent) {
                    // For instructions, keep it centered. For student-work, align left.
                    if (sectionName === 'instructions') {
                        selectedContent.style.justifyContent = 'center';
                    } else if (sectionName === 'student-work') {
                        selectedContent.style.justifyContent = 'flex-start';
                    }
                    selectedContent.style.display = "flex";
                    selectedContent.classList.add("active");

                    // Add fade-in animation
                    selectedContent.style.opacity = "0";
                    selectedContent.style.transform = "translateY(10px)";

                    setTimeout(() => {
                        selectedContent.style.opacity = "1";
                        selectedContent.style.transform = "translateY(0)";
                        selectedContent.style.transition = "all 0.3s ease";
                    }, 10);
                }

                // Initialize or re-initialize student work manager if needed
                if (sectionName === "student-work" && typeof studentWorkManager !== 'undefined') {
                    studentWorkManager.init();
                }
            }

            postComment() {
                const commentInput = this.elements.commentInput;
                const comment = commentInput.value.trim();

                if (!comment) {
                    this.showNotification("Please enter a comment", "error");
                    return;
                }

                // Simulate posting comment
                this.showNotification("Comment posted!", "success");
                commentInput.value = "";

                // In a real application, this would save the comment
                console.log("Comment posted:", comment);
            }

            goToDashboard() {
                // Navigate to teacher.html
                localStorage.removeItem("selectedCourse");
                this.navigateWithAnimation("teacher.html");
            }

            goToArchive() {
                // Navigate to archive.html
                this.navigateWithAnimation("teacherArchive.html");
            }

            toggleTeachingDropdown() {
                this.elements.teachingCoursesDropdown.classList.toggle("show");
                this.elements.teachingLink.querySelector(".dropdown-arrow").classList.toggle("rotate");
                this.renderTeachingCourses(); // Re-render to ensure up-to-date list
            }

            renderTeachingCourses() {
                const currentUserEmail = localStorage.getItem("currentUser");
                const dashboardKey = `dashboard_${currentUserEmail}`;
                const dashboard = JSON.parse(localStorage.getItem(dashboardKey) || '{"courses": []}');
                const teachingCourses = dashboard.courses.filter(
                    (course) => !course.archived && course.teacher === currentUserEmail
                );

                this.elements.teachingCoursesDropdown.innerHTML = ""; // Clear existing list

                if (teachingCourses.length === 0) {
                    const listItem = document.createElement("li");
                    listItem.className = "dropdown-item-sidebar no-courses";
                    listItem.textContent = "No classes taught";
                    this.elements.teachingCoursesDropdown.appendChild(listItem);
                } else {
                    teachingCourses.forEach((course) => {
                        const listItem = document.createElement("li");
                        listItem.className = "dropdown-item-sidebar";
                        listItem.textContent = course.name;
                        listItem.dataset.courseId = course.id;
                        listItem.addEventListener("click", (e) => {
                            e.stopPropagation();
                            this.openCourse(course);
                        });
                        this.elements.teachingCoursesDropdown.appendChild(listItem);
                    });
                }
            }

            openCourse(course) {
                localStorage.setItem("selectedCourse", JSON.stringify(course));
                this.navigateWithAnimation("stream.html"); // Assuming stream.html is the course page
            }

            navigateWithAnimation(url) {
                // Navigate with animation - Same as stream.html
                document.body.style.opacity = "0";
                document.body.style.transition = "opacity 0.3s ease";

                setTimeout(() => {
                    // In a real application, this would navigate to the URL
                    console.log("Navigating to:", url);
                    window.location.href = url;
                }, 300);
            }

            handleClickOutside(e) {
                // Handle click outside - Same as stream.html
                if (window.innerWidth <= 768) {
                    const sidebar = this.elements.sidebar;
                    const menuBtn = this.elements.menuBtn;

                    if (sidebar.classList.contains("open") &&
                        !sidebar.contains(e.target) &&
                        !menuBtn.contains(e.target)) {
                        this.toggleSidebar();
                    }
                }

                // Close teaching dropdown if clicked outside
                if (this.elements.teachingCoursesDropdown.classList.contains("show") &&
                    !this.elements.teachingLink.contains(e.target) &&
                    !this.elements.teachingCoursesDropdown.contains(e.target)) {
                    this.toggleTeachingDropdown();
                }
            }

            handleResize() {
                // Handle window resize - Same as stream.html
                if (window.innerWidth > 768) {
                    this.elements.sidebar.classList.remove("open");
                    this.elements.contentWrapper.classList.remove("sidebar-open");
                }
            }

            setupResponsive() {
                // Setup responsive behavior - Same as stream.html
                this.handleResize();

                // Setup intersection observer for animations
                const observerOptions = {
                    threshold: 0.1,
                    rootMargin: "0px 0px -50px 0px"
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.style.opacity = "1";
                            entry.target.style.transform = "translateY(0)";
                        }
                    });
                }, observerOptions);

                // Observe elements for animation
                const animatedElements = document.querySelectorAll(".assignment-content, .student-work-wrapper");
                animatedElements.forEach(el => {
                    el.style.opacity = "0";
                    el.style.transform = "translateY(20px)";
                    el.style.transition = "all 0.6s ease";
                    observer.observe(el);
                });
            }

            showNotification(message, type = "info") {
                // Show notification - Same as stream.html
                const existingNotifications = document.querySelectorAll(".notification");
                existingNotifications.forEach(notification => notification.remove());

                const notification = document.createElement("div");
                notification.className = `notification ${type}`;
                notification.textContent = message;

                notification.style.cssText = `
                    position: fixed;
                    top: 80px;
                    right: 24px;
                    padding: 16px 20px;
                    border-radius: 12px;
                    color: white;
                    font-weight: 600;
                    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
                    z-index: 10001;
                    animation: slideInRight 0.3s ease;
                    max-width: 400px;
                `;

                // Set background color based on type
                switch (type) {
                    case "success":
                        notification.style.background = "linear-gradient(135deg, #4caf50 0%, #2e7d32 100%)";
                        break;
                    case "error":
                        notification.style.background = "linear-gradient(135deg, #f44336 0%, #d32f2f 100%)";
                        break;
                    case "info":
                    default:
                        notification.style.background = "linear-gradient(135deg, #2196f3 0%, #1565c0 100%)";
                        break;
                }

                document.body.appendChild(notification);

                // Auto remove after 3 seconds
                setTimeout(() => {
                    notification.style.opacity = "0";
                    notification.style.transform = "translateX(100%)";
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }

            // Utility methods
            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }
        }

        // Student Work Manager (Merged from Student-work.html)
        class StudentWorkManager {
            constructor() {
                this.currentView = 'student-work';
                this.selectedStudent = 'tanvir';
                this.allStudentsChecked = true;
                this.assignedFilterChecked = true;
                this.submissionsAccepted = false;
                this.updateInterval = null; // Initialize to null
                // Do not call init here, it will be called by AssignmentPageManager.switchSection
            }

            init() {
                console.log('Student work manager initialized');
                this.updateStudentDetail(); // Ensure initial student detail is loaded
                this.setupEventListeners();
                this.updateSubmissionToggle(); // Set initial state of toggle
            }

            setupEventListeners() {
                // Keyboard shortcuts
                document.removeEventListener('keydown', this._handleKeyDown); // Remove previous listener if exists
                this._handleKeyDown = this.handleKeyDown.bind(this);
                document.addEventListener('keydown', this._handleKeyDown);

                // Handle responsive behavior
                window.removeEventListener('resize', this._handleResize); // Remove previous listener if exists
                this._handleResize = this.handleResize.bind(this);
                window.addEventListener('resize', this._handleResize);

                // Simulate real-time updates
                if (!this.updateInterval) { // Prevent multiple intervals
                    this.updateInterval = setInterval(() => {
                        console.log('Checking for new submissions...');
                    }, 30000);
                }
            }

            // Tab switching (handled by AssignmentPageManager, but kept for completeness if needed)
            switchTab(tabName) {
                // This function is now primarily handled by AssignmentPageManager.switchSection
                // If this class needs to react to tab changes, it's for internal logic, not UI switching
                console.log(`StudentWorkManager: Internal logic for tab: ${tabName}`);
            }

            // Navigation functions
            goBack() {
                console.log('StudentWorkManager: Going back');
                // In a real app, this would navigate back or close the student work view
                assignmentManager.switchSection('instructions'); // Example: go back to instructions
            }

            shareAssignment() {
                console.log('StudentWorkManager: Sharing assignment');
                assignmentManager.showNotification("Share functionality coming soon!", "info");
            }

            togglePointsDropdown() {
                console.log('StudentWorkManager: Toggling points dropdown');
                assignmentManager.showNotification("Points dropdown coming soon!", "info");
            }

            openSettings() {
                console.log('StudentWorkManager: Opening settings');
                assignmentManager.showNotification("Student work settings coming soon!", "info");
            }

            // Filter functions
            toggleAllStudents() {
                this.allStudentsChecked = !this.allStudentsChecked;
                console.log('StudentWorkManager: All students filter:', this.allStudentsChecked);
                this.updateStudentList();
            }

            toggleSortDropdown() {
                console.log('StudentWorkManager: Toggling sort dropdown');
                assignmentManager.showNotification("Sort options coming soon!", "info");
            }

            toggleAssignedFilter() {
                this.assignedFilterChecked = !this.assignedFilterChecked;
                console.log('StudentWorkManager: Assigned filter:', this.assignedFilterChecked);
                this.updateStudentList();
            }

            selectStudent(studentId) {
                this.selectedStudent = studentId;
                console.log('StudentWorkManager: Selected student:', studentId);

                // Update student item selection visual feedback
                const studentItems = document.querySelectorAll('#student-work-content .student-item');
                studentItems.forEach(item => {
                    item.style.background = '';
                });
                const selectedItem = document.querySelector(`#student-work-content .student-item[onclick*="${studentId}"]`);
                if (selectedItem) {
                    selectedItem.style.background = '#e8f0fe';
                }

                this.updateStudentDetail();
            }

            // Submission controls
            toggleSubmissions() {
                this.submissionsAccepted = !this.submissionsAccepted;
                this.updateSubmissionToggle();
                console.log('StudentWorkManager: Submissions accepted:', this.submissionsAccepted);
            }

            updateSubmissionToggle() {
                const toggle = document.querySelector('#student-work-content .toggle-switch');
                const toggleTextSpan = document.querySelector('#student-work-content .toggle-text span');

                if (toggle && toggleTextSpan) {
                    if (this.submissionsAccepted) {
                        toggle.classList.remove('disabled');
                        toggle.classList.add('active-toggle');
                        toggle.style.background = '#1976d2';
                        toggleTextSpan.textContent = 'Accepting submissions';
                    } else {
                        toggle.classList.add('disabled');
                        toggle.classList.remove('active-toggle');
                        toggle.style.background = '#dadce0';
                        toggleTextSpan.textContent = 'Not accepting submissions';
                    }
                }
            }

            filterAll() {
                console.log('StudentWorkManager: Filtering all submissions');
                assignmentManager.showNotification("Filter options coming soon!", "info");
            }

            toggleView() {
                console.log('StudentWorkManager: Toggling view mode');
                assignmentManager.showNotification("View mode toggle coming soon!", "info");
            }

            showHelp() {
                console.log('StudentWorkManager: Showing help');
                assignmentManager.showNotification("Help section coming soon!", "info");
            }

            // Update functions
            updateStudentList() {
                // In a real app, this would filter the student list based on current filters
                console.log('StudentWorkManager: Updating student list');
            }

            updateStudentDetail() {
                // In a real app, this would load the selected student's work
                console.log('StudentWorkManager: Updating student detail for:', this.selectedStudent);
            }

            // Keyboard shortcuts
            handleKeyDown(e) {
                if (e.ctrlKey || e.metaKey) {
                    switch (e.key) {
                        case '1':
                            e.preventDefault();
                            assignmentManager.switchSection('instructions');
                            break;
                        case '2':
                            e.preventDefault();
                            assignmentManager.switchSection('student-work');
                            break;
                    }
                }
            }

            // Handle responsive behavior
            handleResize() {
                const isMobile = window.innerWidth <= 768;
                console.log('StudentWorkManager: Screen size changed, mobile:', isMobile);
            }
        }


        // Global reference
        let assignmentManager;
        let studentWorkManager; // Global reference for StudentWorkManager

        // Initialize the assignment page manager
        document.addEventListener("DOMContentLoaded", () => {
            assignmentManager = new AssignmentPageManager();
            studentWorkManager = new StudentWorkManager(); // Initialize StudentWorkManager
            // Set initial active tab on page load
            assignmentManager.switchSection('instructions');
        });

        // Add CSS animation keyframes
        const style = document.createElement("style");
        style.innerHTML = `
            @keyframes slideInRight {
                from {
                    opacity: 0;
                    transform: translateX(100%);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }

            .notification {
                animation: slideInRight 0.3s ease;
            }

            /* Enhanced focus styles */
            .section-tab:focus,
            .comment-input:focus,
            .send-btn:focus,
            .options-btn:focus,
            .return-btn:focus,
            .share-btn:focus,
            .points-selector:focus,
            .settings-btn:focus,
            .sort-btn:focus,
            .filter-all-btn:focus,
            .view-toggle:focus,
            .help-icon:focus {
                outline: 2px solid var(--primary-color);
                outline-offset: 2px;
            }

            /* Smooth transitions for all interactive elements */
            .section-tab,
            .comment-input,
            .send-btn,
            .options-btn,
            .sidebar-item,
            .header-icon-btn,
            .menu-btn,
            .return-btn,
            .share-btn,
            .points-selector,
            .settings-btn,
            .sort-btn,
            .filter-all-btn,
            .view-toggle,
            .help-icon,
            .toggle-switch {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            /* Enhanced hover effects */
            .assignment-content:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.16);
            }
            /* Ensure student-work-wrapper has no hover shadow */
            .student-work-wrapper:hover {
                transform: none; /* Remove any transform on hover */
                box-shadow: none; /* Ensure no shadow on hover */
            }


            /* Custom scrollbar */
            ::-webkit-scrollbar {
                width: 8px;
                height: 8px;
            }

            ::-webkit-scrollbar-track {
                background: #f1f1f1;
                border-radius: 4px;
            }

            ::-webkit-scrollbar-thumb {
                background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
                border-radius: 4px;
                transition: var(--transition);
            }

            ::-webkit-scrollbar-thumb:hover {
                background: linear-gradient(135deg, var(--primary-hover) 0%, #2e7d32 100%);
            }

            /* Accessibility improvements */
            @media (prefers-reduced-motion: reduce) {
                *,
                *::before,
                *::after {
                    animation-duration: 0.01ms !important;
                    animation-iteration-count: 1 !important;
                    transition-duration: 0.01ms !important;
                }
            }

            /* High contrast mode support */
            @media (prefers-contrast: high) {
                :root {
                    --border-color: #000;
                    --shadow-light: none;
                    --shadow-medium: none;
                    --shadow-heavy: none;
                }

                .assignment-content,
                .student-work-wrapper {
                    border: 2px solid var(--border-color);
                }
            }

            /* Additional responsive improvements */
            @media (max-width: 1200px) {
                #instructions-content .assignment-content {
                    max-width: 800px;
                }
            }

            @media (max-width: 992px) {
                #instructions-content .assignment-content {
                    max-width: 700px;
                }
                
                /* Student work wrapper should always be full width and left aligned */
                #student-work-content .student-work-wrapper {
                    max-width: 100%; 
                    margin: 0;
                }
            }

            @media (max-width: 576px) {
                .content-wrapper {
                    padding: 16px 12px;
                }
                
                .assignment-header {
                    padding: 16px;
                }
                
                .assignment-body {
                    padding: 16px;
                }
                
                .comments-section {
                    padding: 16px;
                }
            }
        `;
        document.head.appendChild(style);

        // Global error handling
        window.addEventListener("error", (e) => {
            console.error("Global error:", e.error);
            if (assignmentManager) {
                assignmentManager.showNotification(
                    "An error occurred. Please try again.",
                    "error"
                );
            }
        });

        // Network status monitoring
        window.addEventListener("online", () => {
            if (assignmentManager) {
                assignmentManager.showNotification("Connection restored", "success");
            }
        });

        window.addEventListener("offline", () => {
            if (assignmentManager) {
                assignmentManager.showNotification("You are offline", "info");
            }
        });

        // Visibility change handling
        document.addEventListener("visibilitychange", () => {
            if (!document.hidden && assignmentManager) {
                console.log("Page became visible");
            }
        });
    </script>
</body>

</html>